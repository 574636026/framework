/*! Injedu UI v0.0.1 | by Joy Zhou | Date 2016 | Licensed under MIT | 2016-11-02T18:34:58+0800 */ 
!function(t,e){"use strict";t.IJ||(t.IJ={});var a={ROOTPATH:e.ROOTPATH||"",STATUS:{SUCCESS:200,ACCESSDECISION:403,ERROR:500},STATUSMESSAGE:{403:"\u8bbf\u95ee\u88ab\u62d2\u7edd,\u60a8\u5f53\u524d\u6ca1\u6709\u6743\u9650\uff01",500:"\u7cfb\u7edf\u5185\u90e8\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!",1e3:"\u5f53\u524d\u8d26\u6237\u5931\u6548,\u8bf7\u91cd\u65b0\u767b\u5f55\uff01"},VALIDATE:{SUCCESS:"success",FAILD:"faild"},MESSAGE:{UNKONW_STATUS:"\u672a\u77e5\u5f02\u5e38,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!",DATA_NEED_SELECTED:"\u8bf7\u9009\u62e9\u64cd\u4f5c\u5217\uff01",DATA_SELECT_ONE:"\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u5217\uff01",DATA_ADD_SUCCESS:"\u6570\u636e\u521b\u5efa\u6210\u529f,\u662f\u5426\u5173\u95ed?",DATA_EDIT_SUCCESS:"\u6570\u636e\u66f4\u65b0\u6210\u529f,\u662f\u5426\u5173\u95ed?",DATA_SUBMIT_PROCESS:"\u6570\u636e\u63d0\u4ea4\u4e2d,\u8bf7\u7a0d\u540e...",DATA_CONFIRM_DELETE:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u6570\u636e\uff1f",DATA_DELETE_PROCESS:"\u6570\u636e\u5220\u9664\u4e2d,\u8bf7\u7a0d\u540e...",DATA_CONFIRM_SORT_TOP:"\u786e\u8ba4\u8981\u7f6e\u9876\u9009\u4e2d\u7684\u6570\u636e\uff1f",DATA_CONFIRM_SORT_DOWN:"\u786e\u8ba4\u8981\u7f6e\u5e95\u9009\u4e2d\u7684\u6570\u636e\uff1f"},STORY_KEY:{DIC:"_IJDIC_KEY_",MENU:"_IJ_MENU_",MENU_ACTIVE:"_IJ_MENU_ACTIVE_"},URL:{DIC:"/sys/config/dic/getSubDic/%s",UPLOAD:"/sys/file/upload/%s"}};t.IJ.Const=a}(jQuery,window),!function(t){"use strict";t.IJ||(t.IJ={});var e=t.AMUI||{},a=t.IJ.Const,n={clearCache:function(){t.AMUI.store.enabled&&t.AMUI.store.clear()},getDicName:function(e,n){var i=t.AMUI.store.get(a.DIC+e);if(i){var o={};return t.each(i.sub,function(t,e){o[e.value]=e.item}),o[n]}},refreshUI:function(a){t.each(e.DOMWatchers,function(t,e){e(a)})},isUI:function(t,e){return t.is("[data-ij-"+e+"],[data-am-"+e+"]")||void 0!=t.data("amui."+e)},setUIData:function(a,n,i){var o="data-ij-"+n,s=t.extend(e.utils.options(a.attr(o)),i);a.attr(o,JSON.stringify(s))},htmlencode:function(e){return"string"===t.type(e)?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},linkUrl:function(e,n){if(e){var n=n||{},i=document.getElementById("_linkform_");void 0!=i&&null!=i||(i=document.createElement("form"),i.id="_linkform_",i.method=n.metohd||"get",document.body.appendChild(i)),n.target&&(i.target=n.target);var o=n.params;if(o)for(var s in o){var r=document.createElement("input");r.type="hidden",r.name=s,r.value=o[s],i.appendChild(r)}n.abs||(e=a.ROOTPATH+e),i.action=e,i.submit(),t(i).remove()}},fillForm:function(e,a){if(a){var n=this,i=t(":input:not(:button)",e);t.each(a,function(t,e){var a=i.filter('[name="'+t+'"]');a&&a.length>0&&(n.isUI(a,"select")?n.setUIData(a,"select",{dataValue:e}):n.isUI(a,"datepicker")?a.attr("value",e):n.isUI(a,"switch")?a.prop("checked",e):n.isUI(a,"dic")?n.setUIData(a,"dic",{dataValue:e}):n.isUI(a,"datetimepicker")?e&&n.setUIData(a,"datetimepicker",{startDate:e.dateStart,endDate:e.dateEnd}):a.is("textarea")?void 0!=e&&a.val(e.replace(new RegExp("<br/>","g"),"\r\n")):n.isUI(a,"tags")?n.setUIData(a,"tags",{dataValue:e}):a.val(e))})}},fillObject:function(e,a){if(a){var n=this,i=t("[ij-bind]",e);t.each(a,function(e,a){var o=i.filter('[ij-bind="'+e+'"]');if(o&&o.length>0)if(a=n.format(o.attr("ij-format"),a),n.isUI(o,"dic"))n.setUIData(o,"dic",{dataValue:a});else if(o.is("img"))o.attr("src",a);else{var s=a;t.isArray(a)&&(s=a.join("")),"false"!=o.attr("ij-escape")&&(s=n.htmlencode(s)),o.replaceWith(s)}})}},format:function(t,e){if(void 0==t)return e;if(void 0==e)return"";switch(t){case"unix":e<1e10&&(e=1e3*e),e=moment(e).format("YYYY-MM-DD HH:mm:ss");break;case"byte":var a=function(t){for(var e=["B","KB","MB","GB"],a=1024,n="",i=0;i<e.length;i++){if(!(t>a)){n=t.toFixed(2)+e[i];break}t/=a}return n};e=a(e)}return e},resetForm:function(e){if(e){var a=this;t(":input:not(:submit, :button)",e).each(function(){var e=t(this);a.isUI(e,"datepicker")?e.attr("value",""):a.isUI(e,"selected")?(e.val(""),e.trigger("changed.selected.amui")):e.val("")})}},clearForm:function(t){t&&(this.resetForm(t),t.removeData("amui.validator amui.checked").find(":input:not(:submit, :button, :disabled, .am-novalidate)").removeData("validity amui.dfdValidity"))},tranArray:function(e,a){if(e&&!(e.length<=0))return t.map(e,function(t){return t[a]})},formatString:function(t,e){if(arguments.length<=1)return t;if(2==arguments.length&&"object"==typeof e){for(var a in e)if(void 0!=e[a]){var n=new RegExp("({"+a+"})","g");t=t.replace(n,e[a])}}else for(var i=0;i<arguments.length-1;i++)if(void 0!=arguments[i+1]){var n=new RegExp("({)"+i+"(})","g");t=t.replace(n,arguments[i+1])}return t},serializeObject:function(e){var a={};return t(":input:not(:submit, :button)",e).each(function(){var e=a[this.name];e?("array"!=t.type(e)&&(a[this.name]=[e]),a[this.name].push(this.value)):a[this.name]=this.value}),a},serializeFormParam:function(e){var a=this.serializeObject(e),n={};return t.each(a,function(e,a){if("array"==t.type(a)&&e.indexOf(".")!=-1){var i=e.indexOf("."),o=e.substring(0,i),s=e.substring(i+1);t.each(a,function(t,e){n[o+"["+t+"]."+s]=e})}else n[e]=a}),n}};t.IJ.Tools=n}(jQuery),!function(t){"use strict";t.IJ||(t.IJ={});var e={alert:function(e){var e=t.extend({layer:1200,content:"",onConfirm:function(){}},e),a=e.layer,n=[];return n.push('<div class="am-modal am-modal-alert" tabindex="-1" style="z-index:'+a+'">'),n.push('<div class="am-modal-dialog am-modal-self-content">'),e.title&&n.push('<div class="am-modal-self-header">'+e.title+"</div>"),n.push('<div class="am-modal-self-body">'+e.content+"</div>"),n.push('<div class="am-modal-self-footer am-cf"><button class="am-modal-btn am-btn am-btn-primary am-radius">\u786e\u5b9a</button>'),n.push("</div>"),n.push("</div>"),t(n.join("")).appendTo("body").modal().on("closed.modal.amui",function(){t(this).remove(),e.onConfirm()})},confirm:function(e){var e=t.extend({layer:1200,content:"",onConfirm:function(){},onCancel:function(){}},e),a=e.layer,n=[];return n.push('<div class="am-modal am-modal-confirm" tabindex="-1" style="z-index:'+a+'">'),n.push('<div class="am-modal-dialog am-modal-self-content">'),e.title&&n.push('<div class="am-modal-self-header">'+e.title+"</div>"),n.push('<div class="am-modal-self-body">'+e.content+"</div>"),n.push('<div class="am-modal-self-footer am-cf">'),n.push('<button class="am-modal-btn am-btn am-btn-default am-radius" data-am-modal-cancel>\u53d6\u6d88</button>'),n.push('<button class="am-modal-btn am-btn am-btn-primary am-radius" data-am-modal-confirm>\u786e\u5b9a</button>'),n.push("</div>"),n.push("</div>"),n.push("</div>"),t(n.join("")).appendTo("body").modal({onConfirm:function(t){e.onConfirm(t)},onCancel:function(){e.onCancel()}}).on("closed.modal.amui",function(){t(this).remove()})},loading:function(e){var e=t.extend({layer:1500,title:"\u6b63\u5728\u8f7d\u5165..."},e),a=e.layer,n=[];n.push('<div class="am-modal am-modal-loading am-modal-no-btn" tabindex="-1" style="z-index:'+a+'">'),n.push('<div class="am-modal-dialog">'),n.push('<div class="am-modal-hd">'+e.title+"</div>"),n.push('<div class="am-modal-bd">'),n.push('<span class="am-icon-spinner am-icon-spin"></span>'),n.push("</div>"),n.push("</div>"),n.push("</div>");return t(n.join("")).appendTo("body").modal().on("closed.modal.amui",function(){t(this).remove()})},actions:function(e){var e=t.extend({items:[],onSelected:function(t,e){}},e),a=[];a.push('<div class="am-modal-actions">'),a.push('<div class="am-modal-actions-group">'),a.push('<ul class="am-list">'),e.title&&a.push('<li class="am-modal-actions-header">'+e.title+"</li>"),e.items.forEach(function(t,e){a.push('<li><button class="am-btn am-btn-block '+(t.css||"")+'">'+t.content+"</button></li>")}),a.push("</ul>"),a.push("</div>"),a.push('<div class="am-modal-actions-group">'),a.push('<button class="am-btn am-btn-secondary am-btn-block" data-am-modal-close>\u53d6\u6d88</button>'),a.push("</div>"),a.push("</div>");var n=t(a.join("")).appendTo("body");return t(".am-list > li > button",n).on("click",function(){e.onSelected(t(this).parent().index(),this)}),n.modal().on("closed.modal.amui",function(){t(this).remove()})},prompt:function(e){var e=t.extend({content:"",onConfirm:function(){},onCancel:function(){}},e),a=[];return a.push('<div class="am-modal am-modal-prompt" tabindex="-1">'),a.push('<div class="am-modal-dialog">'),e.title&&a.push('<div class="am-modal-hd">'+e.title+"</div>"),a.push('<div class="am-modal-bd">'+e.content+"</div>"),a.push('<input type="text" class="am-modal-prompt-input">'),a.push('<div class="am-modal-footer am-cf">'),a.push('<span class="am-modal-btn am-btn am-btn-default am-radius" data-am-modal-cancel>\u53d6\u6d88</span>'),a.push('<span class="am-modal-btn am-btn am-btn-default am-radius" data-am-modal-confirm>\u63d0\u4ea4</span>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),t(a.join("")).appendTo("body").modal({onConfirm:function(t){e.onConfirm(t)},onCancel:function(t){e.onCancel(t)}}).on("closed.modal.amui",function(){t(this).remove()})},popup:function(e){var e=t.extend({content:"",onClose:function(){}},e),a=[];return a.push('<div class="am-popup">'),a.push('<div class="am-popup-inner">'),a.push('<div class="am-popup-hd">'),e.title&&a.push('<h4 class="am-popup-title">'+e.title+"</h4>"),a.push('<span data-am-modal-close  class="am-close">&times;</span>'),a.push("</div>"),a.push('<div class="am-popup-bd">'+e.content+"</div>"),a.push("</div> "),a.push("</div>"),t(a.join("")).appendTo("body").modal().on("closed.modal.amui",function(){t(this).remove(),e.onClose()})},toast:function(e){e=e||{},"string"==t.type(e)&&(e={content:e}),e.content=e.content||"",e.time=e.time||1e3;var a=t("#in-toast-panel");0==a.length&&(a=t('<div id="in-toast-panel" class="am-toast-panel"></div>'),a.appendTo("body"));var n=[];n.push('<div class="am-alert am-toast am-animation-slide-top" data-am-alert>'),n.push('<button type="button" class="am-close">&times;</button>'),n.push('<div class="am-panel-bd">'),n.push(e.content),n.push("</div>"),n.push("</div>");var i=t(n.join(""));i.appendTo(a),setTimeout(function(){i.remove()},e.time)},pureView:function(e){var a=[];return a.push('<div class="am-modal am-modal-no-btn" tabindex="-1">'),a.push('<div class="am-modal-dialog">'),a.push('<div class="am-modal-hd">'),a.push('<span data-am-modal-close  class="am-close"><i class="am-icon-times-circle"></i></span>'),a.push("</div>"),a.push('<div class="am-modal-bd">'),a.push('<img class="am-img-thumbnail" src="'+e+'"/>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),t(a.join("")).appendTo("body").modal().on("closed.modal.amui",function(){t(this).remove()})}},a=function(){return{close:function(t,e){e>0?setTimeout(function(){t.modal("close")},e):t.modal("close")},alert:function(t){return e.alert({title:"\u7cfb\u7edf\u6d88\u606f",content:t})},confirm:function(t){return e.confirm(t)},toast:function(t){return e.toast({content:t,time:5e3})},loading:function(a){return"string"==t.type(a)?e.loading({title:a}):e.loading(a)},popup:function(t){return e.popup({content:t})},pureView:function(t){return e.pureView(t)},actions:function(t){return e.actions(t)}}}();t.IJ.Dialog=a}(jQuery),!function(t){"use strict";t.IJ||(t.IJ={});var e=t.IJ.Const,a=t.IJ.Dialog,n=t.IJ.Tools,i=function(){var i=function(n){var i={};if(t.isPlainObject(n)||"array"==t.type(n))i=n;else{if("{"!=n.substring(0,1))return!1;i=t.parseJSON(n)}return void 0!=i.resultCode&&i.resultCode!=e.STATUS.SUCCESS&&(a.toast(i.resultMessage||e.STATUSMESSAGE[i.resultCode]||e.MESSAGE.UNKONW_STATUS),!0)},o=function(n){var n=t.extend({type:"get",traditional:!0,cache:!1},n);n.url=(n.rootpath||e.ROOTPATH)+n.url;var o=n.callback,s=-1,r=t.type(n.loading),l=-1;return"boolean"===r&&1==n.loading?s=a.loading():"object"===r&&(t.isPlainObject(n.loading)?(s=a.loading(n.loading),l=n.loading.loadtimeout):(l=500,s=n.loading)),n.success=function(t){return t?void(i(t)||(t.resultCode?o&&o.call(this,t.result):o&&o.call(this,t))):void(o&&o.call(this))},n.error=function(t,e){var n="";switch(t.status){case 500:n="\u670d\u52a1\u5668\u5b58\u5728\u9519\u8bef\uff0c\u672a\u80fd\u6b63\u786e\u5904\u7406\u4f60\u7684\u8bf7\u6c42\uff01";break;case 403:n="\u4f60\u65e0\u6743\u8fdb\u884c\u6b64\u64cd\u4f5c\u6216\u9875\u9762\u8bbf\u95ee\uff01";break;case 404:n="\u8bf7\u6c42\u8bbf\u95ee\u7684\u5730\u5740\u6216\u5185\u5bb9\u4e0d\u5b58\u5728\uff01";break;default:n="\u672a\u77e5\u9519\u8bef\uff0c\u9519\u8bef\u4ee3\u7801\uff1a"+e}a.toast(n)},n.complete=function(t,e){n.loading&&s!=-1&&a.close(s,l)},t.ajax(n)},s=function(e){return o(t.extend(e,{dataType:"json"}))};return{ajax:function(t){return o(t)},load:function(t,e){var a;return o({url:t+"?t="+(new Date).getTime(),async:!1,loading:void 0==e||e,callback:function(t){a=t}}),a},get:function(t,e,a,n){return s({url:t,data:e,type:"get",callback:a,loading:n})},getSync:function(t,e,a,n){return s({url:t,data:e,type:"get",async:!1,callback:a,loading:n})},getSyncData:function(t,e,a,n){var i;return s({url:t,data:e,type:"get",async:!1,callback:function(t){i=t},loading:n}),i},post:function(t,e,a,n){return s({url:t,data:e,type:"post",callback:a,loading:n})},postSync:function(t,e,a,n){return s({url:t,data:e,type:"post",async:!1,callback:a,loading:n})},postSyncData:function(t,e,a,n){var i;return s({url:t,data:e,type:"post",async:!1,callback:function(t){i=t},loading:n}),i},postJSON:function(t,e,a,n){return s({url:t,data:JSON.stringify(e),type:"post",contentType:"application/json",processData:!1,callback:a,loading:n})},formValidatorSubmit:function(i,o,r,l){var c=i.$element,d=i.isFormValid(),u=n.isUI(c,"fileupload"),p=function(){var t=a.loading({title:e.MESSAGE.DATA_SUBMIT_PROCESS});u&&c.ijfileupload("hasFile")?(c.ijfileupload("url",e.ROOTPATH+o),l&&c.ijfileupload("completed",l,t),r&&c.ijfileupload("formData",r),c.ijfileupload("fileupload")):s({url:o,data:r,type:"post",callback:l,loading:t})};"boolean"===t.type(d)?d&&p():t.when(d).then(function(){p()})}}}();t.IJ.Http=i}(jQuery),!function(t){"use strict";t.IJ||(t.IJ={});var e=t.IJ.Http,a=t.IJ.Tools,n=function(){var n=function(e,n){e.modal({closeViaDimmer:n.closeViaDimmer,cancelable:!1}).on("close.modal.amui",function(){n.animation&&t(this).removeClass(n.animationClass).addClass(n.animationRemoveClass)}).on("closed.modal.amui",function(){var e=t(this);setTimeout(function(){n.isRemove&&e.remove(),n.onClose()},500)}).on("opened.modal.amui",function(){n.onOpen(),a.refreshUI(t(this))})},i=function(e){var e=t.extend({target:!1,content:"",isRemove:!0,animation:!0,animationClass:"am-animation-scale-up",animationRemoveClass:"am-animation-scale-down am-animation-reverse",winClass:"am-popup am-popup-lg",closeViaDimmer:!1,onClose:function(){},onOpen:function(){}},e);"bottom"==e.direction&&(e.animation=!1,e.winClass="am-modal-actions am-modal-bottom");var a=[];a.push('<div class="'+e.winClass+'">'),a.push('<div class="am-popup-inner">'),a.push('<div class="am-popup-hd am-popup-hd-fixed">'),e.title&&a.push('<h4 class="am-popup-title">'+e.title+"</h4>"),a.push('<span data-am-modal-close  class="am-close">&times;</span>'),a.push("</div>"),a.push('<div class="am-popup-bd">'+e.content+"</div>"),a.push("</div> "),a.push("</div>");var i=t(a.join(""));return e.animation&&i.addClass(e.animationClass),i.appendTo("body"),e.target?e.target.on("click",function(){n(i,e)}):n(i,e),i},o=function(e){var e=t.extend({content:"",items:['<input type="text" class="am-modal-prompt-input">'],onConfirm:function(){},onCancel:function(){}},e),n=[];return n.push('<div class="am-modal am-modal-prompt" tabindex="-1">'),n.push('<div class="am-modal-dialog">'),e.title&&n.push('<div class="am-modal-hd">'+e.title+"</div>"),n.push('<div class="am-modal-bd">'+e.content),e.items.forEach(function(t,e){n.push(t)}),n.push("</div>"),n.push('<div class="am-modal-footer am-cf">'),n.push('<span class="am-modal-btn am-btn am-btn-default am-radius" data-am-modal-cancel>\u53d6\u6d88</span>'),n.push('<span class="am-modal-btn am-btn am-btn-default am-radius" data-am-modal-confirm>\u63d0\u4ea4</span>'),n.push("</div>"),n.push("</div>"),n.push("</div>"),t(n.join("")).appendTo("body").modal({relatedTarget:this,cancelable:!1,onConfirm:function(t){e.onConfirm(t)},onCancel:function(t){e.onCancel(t)}}).on("closed.modal.amui",function(){var e=t(this);setTimeout(function(){e.remove()},500)}).on("opened.modal.amui",function(){a.refreshUI(t(this))})},s=function(e){var e=t.extend({direction:"right",content:"",onOpen:function(){},onClose:function(){}},e),n=[];n.push('<div class="am-offcanvas">'),n.push('<div class="am-offcanvas-bar am-offcanvas-bar-auto'),"right"==e.direction&&n.push(" am-offcanvas-bar-flip"),n.push('">'),n.push('<div class="am-offcanvas-content">'),n.push("</div></div></div>");var i=t(n.join("")).appendTo("body").on("open.offcanvas.amui",function(){var n=t(this);e.onOpen(n),a.refreshUI(n)}).on("close.offcanvas.amui",function(){e.onClose(t(this))});return t(".am-offcanvas-content",i).html(e.content),i};return{open:function(t){if(t.url)return t.content=e.load(t.url),i(t)},openAuto:function(t){if(t.url)return t.content=e.load(t.url),t.winClass="am-popup am-popup-auto",i(t)},bottom:function(t){if(t.url)return t.content=e.load(t.url,t.loading),t.direction="bottom",i(t)},sidebar:function(t){if(t.url&&(t.content=e.load(t.url,t.loading)),t.content)return s(t)},prompt:function(t){return o(t)},sorted:function(e){var e=t.extend({title:"\u8c03\u6574\u987a\u5e8f",sort:0},e),a='<input name="sort" type="number" value="'+e.sort+'" class="am-modal-prompt-input"/>';return e.items=[a],o(e)}}}();t.IJ.Window=n}(jQuery),!function(t){"use strict";var e=t.AMUI,a=t.IJ.Http,n=t.IJ.Const;if(e&&e.validator){t.AMUI.validator.patterns=t.extend(t.AMUI.validator.patterns,{userName:/^[a-zA-Z]\w{3,16}$/,mobile:/^1((3|5|8){1}\d{1}|70)\d{8}$/,chinese:/[\u4e00-\u9fa5]/,zipCode:/^\d{6}$/,charCode:/^[a-zA-Z_]{4,20}$/,qq:/^[1-9][0-9]{4,}$/,ip:/^((([1-9]\d?)|(1\d{2})|(2[0-4]\d)|(25[0-5]))\.){3}(([1-9]\d?)|(1\d{2})|(2[0-4]\d)|(25[0-5]))$/}),t.AMUI.validator.DEFAULTS.ignore=":hidden:not([data-am-selected], .am-validate),.am-tabs-bd-wizard .am-tab-panel:not(.am-active) :input";var i=function(t){var e=t.parent();return e.is(".am-input-group")||(e=e.is(".am-switch-container")?t.parents(".am-switch"):t),e};t.AMUI.validator.DEFAULTS.onValid=function(e){i(t(e.field)).next(".am-alert").hide()},t.AMUI.validator.DEFAULTS.onInValid=function(e){var a=t(e.field),n=i(a),o=n.next(".am-alert"),s=a.data("validationMessage")||this.getValidationMessage(e);o.length||(o=t('<div class="am-alert am-alert-danger"></div>').hide().insertAfter(n)),s&&o.html(s).show()},t.AMUI.validator.validationMessages.zh_CN.customError=t.extend(t.AMUI.validator.validationMessages.zh_CN.customError,{remote:"%s \u6821\u9a8c\u5931\u8d25",remoteunique:"%s \u5fc5\u987b\u552f\u4e00",fileuploadrequired:"\u8bf7\u4e0a\u4f20\u6587\u4ef6",fileupload:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}),t.AMUI.validator.ERROR_MAP=t.extend(t.AMUI.validator.ERROR_MAP,{remote:"name",remoteunique:"name"}),t.AMUI.validator.DEFAULTS.validate=function(e){if(e.valid){var a=t(e.field),n=this.$element,i=t.trim(a.val());return a.is("[remote]")?o.remote(a,n,i,e):void 0}};var o={remote:function(i,o,s,r){if(void 0==s||null==s||""===s)return r;var l=t.extend({},e.utils.options(i.attr("remote")));r.customError="remote",l.message&&(r.customError="remote"+l.message);var c=l.url,d={key:s};if(l.data&&l.data.length>0)for(var u=0;u<l.data.length;u++){var p=t('[name="'+l.data[u]+'"]',o);p.length>0&&p.attr("value")&&(d[p.attr("name")]=p.attr("value"))}return a.post(c,d).then(function(t){if(!t)return r.valid=!1,r;var e=n.VALIDATE.SUCCESS;return e=t.resultCode?t.resultCode==n.STATUS.SUCCESS?t.result.status:n.VALIDATE.FAILD:t.status,e==n.VALIDATE.FAILD&&(r.valid=!1),r},function(){return r.valid=!1,r})}}}}(jQuery),!function(t,e){"use strict";t.IJ||(t.IJ={});var a=t.IJ.Const,n={init:function(e){var e=t.extend({},e);if(!e.server){var n=a.ROOTPATH,i="http:",o=n,s=n.indexOf(i);s>-1&&(o=n.substring(s+i.length)),e.server="ws:"+o+"/webSocketServer"}return new WebSocket(e.server)}};t.IJ.SocketUtils=n}(jQuery,window),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Tools,n=t.IJ.Dialog,i=function(e,a){this.options=t.extend({},i.DEFAULTS,a),this.$element=t(e),this.init()};i.DEFAULTS={target:"#page-context"},i.prototype.init=function(){var e=this.options,i=e.url||this.$element.attr("href");i&&this.$element.on("click",function(){var o=n.loading();return t(e.target).load(i+"?t="+(new Date).getTime(),function(){a.refreshUI(t(this)),o.modal("close")}),!1})},e.plugin("ajaxload",i,{dataOptions:"data-ij-ajaxload"}),e.ready(function(e){t("[data-ij-ajaxload]",e).ajaxload()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Const.ROOTPATH;t.fn.extend({autocomplete:function(){var n="ij-autocomplete-value";return this.each(function(){var i=t(this),o=(e.utils.options(i.attr("data-ij-autocomplete"))||{},t.extend({name:"item",value:"value"},o));if(o.url){var s=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(o.name),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:a+o.url,prepare:function(t,e){return e.method="post",e.data={key:t},e},transform:function(t){return t.result}}});i.typeahead({highlight:!0,hint:!1,minLength:1},{source:s,display:o.item}).on("typeahead:select",function(t,e){i.data(n,e),o.target&&i.parent().nextAll('input[name="'+o.target+'"]').val(e[o.value])}).on("typeahead:close",function(t){})}})}}),e.ready(function(e){t("[data-ij-autocomplete]",e).autocomplete()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=function(e,n){this.options=t.extend({},a.DEFAULTS,n),this.$element=t(e),this.init()};a.DEFAULTS={format:"YYYY-MM-DD",autoApply:!0,showEasyBtn:"default",singleDatePicker:!0,showDropdowns:!1,alwaysShowCalendars:!1,minuteStep:5,startDate:void 0,endDate:void 0,drops:"down"},a.RANGES={"default":{"\u4eca\u5929":[moment().startOf("day"),moment().endOf("day")],"\u6628\u5929":[moment().startOf("day").subtract(1,"days"),moment().endOf("day").subtract(1,"days")],"7\u5929\u524d":[moment().startOf("day").subtract(6,"days"),moment().endOf("day")],"14\u5929\u524d":[moment().startOf("day").subtract(13,"days"),moment().endOf("day")],"30\u5929\u524d":[moment().startOf("day").subtract(29,"days"),moment().endOf("day")],"\u5f53\u524d\u6708":[moment().startOf("month"),moment().endOf("month")]},after:{"\u4eca\u5929":[moment().startOf("day"),moment().endOf("day")],"\u660e\u5929":[moment().startOf("day").add(1,"days"),moment().endOf("day").add(1,"days")],"7\u5929\u540e":[moment().startOf("day"),moment().endOf("day").add(6,"days")],"14\u5929\u540e":[moment().startOf("day"),moment().endOf("day").add(13,"days")],"\u4e00\u4e2a\u6708":[moment().startOf("day"),moment().endOf("day").add(1,"month")],"\u4e09\u4e2a\u6708":[moment().startOf("day"),moment().endOf("day").add(3,"month")]}},a.SOURCE_DEFAULTS={singleDatePicker:!0,showDropdowns:!1,autoApply:!0,alwaysShowCalendars:!1,timePicker:!1,timePicker24Hour:!1,timePickerSeconds:!1,timePickerIncrement:1,drops:"down",locale:{format:"YYYY-MM-DD HH:mm:ss",separator:" ~ ",applyLabel:"\u786e\u8ba4",cancelLabel:"\u53d6\u6d88",fromLabel:"From",toLabel:"To",customRangeLabel:"\u9009\u62e9",daysOfWeek:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],firstDay:1}},a.prototype.init=function(){var t=this.genConfig();return this.$element.daterangepicker(t),this.$element},a.prototype.genConfig=function(){var e=this.options,n=t.extend({},a.SOURCE_DEFAULTS);return n.singleDatePicker=e.singleDatePicker,n.autoApply=e.autoApply,n.showDropdowns=e.showDropdowns,n.alwaysShowCalendars=e.alwaysShowCalendars,n.timePickerIncrement=e.minuteStep,n.drops=e.drops,n.startDate=e.startDate,n.endDate=e.endDate,e.showEasyBtn&&(n.ranges=a.RANGES[e.showEasyBtn]),n.locale.format=e.format,e.format.indexOf("H")!=-1&&(n.timePicker=!0,n.timePicker24Hour=!0),e.format.indexOf("s")!=-1&&(n.timePickerSeconds=!0),n},a.prototype.destroy=function(){this.$element.removeData("amui.ijdatetimepicker"),this.$element.removeData("datetimepicker")},e.plugin("ijdatetimepicker",a,{dataOptions:"data-ij-datetimepicker"}),e.ready(function(e){t("[data-ij-datetimepicker]",e).ijdatetimepicker()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=e.store,n=t.IJ.Const,i=t.IJ.Http,o=n.STORY_KEY.DIC,s=function(e,a){this.options=t.extend({},s.DEFAULTS,a),this.$element=t(e),"array"!=t.type(a.dataValue)&&(this.options.dataValue=[a.dataValue]),this.init()};s.DEFAULTS={type:"text",url:n.URL.DIC,code:"",name:"item",value:"value",sub:"sub",display:"inline",dataValue:[],labelClass:"am-u-sm-4 am-form-label",wrapper:"true",inputWrapperClass:"am-u-sm-8",amoptions:{btnWidth:"100%",maxHeight:100}},s.prototype.render=function(e){var a=this.options,n=e[a.sub];if(this.$input=this.$element,"text"!=a.type&&a.wrapper&&"false"!=a.wrapper){this.$label=t('<label class="'+a.labelClass+'">'+e[a.name]+"</label>"),this.$input.parent().prepend(this.$label);var i=t('<div class="'+a.inputWrapperClass+'"></div>');this.$input.wrap(i),this.$element=i,this.renderOption(n)}else this.renderOption(n)},s.prototype.renderOption=function(e){if(e&&!(e.length<0)){var a=this.options,n=a.dataValue,i=a.name,o=a.value,s=[];switch(a.type){case"select":t.each(e,function(e,a){var r='<option value="'+a[o]+'"';n.length>0&&t.inArray(a[o],n)!=-1&&(r+=' selected="selected"'),r+=">"+a[i]+"</option>",s.push(r)}),this.$input.append(s.join("")),this.$input.selected(a.amoptions);break;case"radio":var r=this.$input.attr("name"),l="am-radio";"inline"==a.display&&(l="am-radio-inline"),t.each(e,function(e,a){var c='<label class="'+l+'">';c+='<input type="radio" name="'+r+'" value="'+a[o]+'"',n.length>0&&t.inArray(a[o],n)!=-1&&(c+=' checked="checked"'),c+="/> "+a[i]+"</label>",s.push(c)});var c=t(s.join(""));this.$input.replaceWith(c),t(":input",c).uCheck(),this.$input=c;break;case"checkbox":var r=this.$input.attr("name"),l="am-checkbox";"inline"==a.display&&(l="am-checkbox-inline"),t.each(e,function(e,a){var c='<label class="'+l+'">';c+='<input type="checkbox" name="'+r+'" value="'+a[o]+'"',n.length>0&&t.inArray(a[o],n)!=-1&&(c+=' checked="checked"'),c+="/>"+a[i]+"</label>",s.push(c)});var c=t(s.join(""));this.$input.replaceWith(c),t(":input",c).uCheck(),this.$input=c;break;case"text":if(n.length<=0)return;var d=n[0];t.each(e,function(t,e){e[o]==d&&s.push(e[i])}),this.$input.append(s.join(""))}}},s.prototype.renderWrapper=function(){var t=this,e=this.options,n=e.code,s=o+n;a.has(s)?t.render(a.get(s)):i.get(e.url,{},function(e){t.render(e),a.set(s,e)})},s.prototype.select=function(e){var a=this.$input;switch(this.options.type){case"select":a.selected("select",e);break;default:t(":input",a).eq(e).uCheck("check")}},s.prototype.init=function(){var t=this.options,e=this.$element;if(t.code){this.options.url=t.url.replace("%s",n.dic[t.code]);var a=e.is("input")?e.attr("type"):e[0].tagName;switch(a.toLowerCase()){case"select":this.options.type="select";break;case"radio":this.options.type="radio";break;case"checkbox":this.options.type="checkbox"}this.renderWrapper()}},e.plugin("ijdic",s,{dataOptions:"data-ij-dic"}),e.ready(function(e){t("[data-ij-dic]",e).ijdic()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=(t.IJ.Const,t.IJ.Http),n=function(e,a){return echarts?(this.options=t.extend({},n.DEFAULTS,a),this.$element=t(e),this.charts=echarts.init(e,this.options.theme),void this.init()):void console.log("\u8bf7\u8f7d\u5165echarts\u76f8\u5173js...")};n.DEFAULTS={theme:"default",url:"",data:{},options:{}},n.prototype.init=function(){var t=this.options;t.url?this._load():this.charts.setOption(t.options)},n.prototype._load=function(){var e=this.charts,n=this.options,i=n.options;e.showLoading(),a.get(n.url,n.data,function(a){e.hideLoading(),i=t.extend({},a,i),e.setOption(i)})},n.prototype.refresh=function(e){if(e){var a=this.options;this.options=t.extend(a,e),this._load()}},e.plugin("ijecharts",n,{dataOptions:"data-ij-echarts"}),e.ready(function(e){t("[data-ij-echarts]",e).ijecharts()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Const,n=function(e,a){this.options=t.extend({},n.DEFAULTS,a),this.$element=t(e),this.editor=new wangEditor(e),this.init()};n.DEFAULTS={config:{printLog:!1,menus:["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","|","img","video","insertcode","|","undo","redo","fullscreen"],uploadImgUrl:a.ROOTPATH+a.URL.UPLOAD.replace("%s","editor")},simple:!0,mode:"normal"},n.prototype.init=function(){this.options.simple&&(this.options.config.menus=["source","|","bold","forecolor","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","img","|","undo","fullscreen"]),this.editor.config=t.extend(this.editor.config,this.options.config),this.switchMode(this.options.mode)},n.prototype.switchMode=function(e){switch(e){case"html":var a=this;this.$element.addClass("am-hide");var n=this.$element.val();n=n?n:"\u7f16\u8f91";var i=t('<div class="am-padding"></div>').css({width:"100%",height:this.$element.height(),"overflow-y":"auto",cursor:"pointer",border:"1px dotted #eee"});i.html(n).insertAfter(this.$element).one("click",function(){i.remove(),a.$element.removeClass("am-hide"),a.createEditor()});break;default:this.createEditor()}},n.prototype.createEditor=function(){var e=this.editor;this.editor.config.uploadImgFns.onload=function(a,n){var i=t.parseJSON(a);if(i.result&&i.result.uploads){var o=i.result.uploads[0],s='<img src="'+o.url+'" alt="'+o.name+'" style="max-width:100%;"/>';e.command(null,"insertHtml",s)}},e.create();var a=e.$txt.html();if("<p>"!=a.substring(0,3)){var n=a.lastIndexOf("<br>");n!=-1&&(a=a.substring(0,n)),e.$txt.html("<p>"+a+"</p>")}},n.prototype.html=function(t){this.editor.$txt.html(t)},e.plugin("ijeditor",n,{dataOptions:"data-ij-editor"}),e.ready(function(e){t("[data-ij-editor]",e).ijeditor()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Const,n=t.IJ.Dialog,i=function(e,a){this.options=t.extend({},i.DEFAULTS,a),this.$element=t(e),this.init()};i.DEFAULTS={url:a.ROOTPATH+a.URL.UPLOAD,dir:"upload.dir.test",type:"post",dataType:"json",autoUpload:!1,singleFileUploads:!0,maxNumberOfFiles:void 0,filesContainer:void 0,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,previewMaxWidth:80,getFilesFromResponse:function(e){var e=e.result;return e.result&&e.result.uploads&&t.isArray(e.result.uploads)?e.result.uploads:[]}},i.prototype.init=function(){var e=this.$element,i=this.options;return this.options.url=i.url.replace("%s",i.dir),i.filesContainer||(i.filesContainer=t('[data-trigger="fileupload"]',e)),"number"==t.type(i.maxNumberOfFiles)&&1==i.maxNumberOfFiles&&(i.previewMaxWidth=120),i.getFilesFromResponse||(i.getFilesFromResponse=function(e){var a=this.getResponse(e);return a&&a.uploads&&t.isArray(a.uploads)?a.uploads:[]}),e.fileupload(i),e.on("fileuploadfailed",function(t,e){void 0!=e.resultCode&&e.resultCode!=a.STATUS.SUCCESS&&n.toast(e.resultMessage||a.STATUSMESSAGE[e.resultCode]||a.MESSAGE.UNKONW_STATUS)}),this},i.prototype.getResponse=function(t){var e=t.result;return e.result?e.result:e},i.prototype.hasFile=function(){var e=t(".template-upload",this.options.filesContainer);return e.length>0},i.prototype.fileupload=function(){var e=this.options,a=this.$element,n=t(".template-upload",e.filesContainer),i=new t.Deferred;if(!this.hasFile())return i.resolve(),i;var o=[];n.each(function(){var e=t(this).data("data");t.merge(o,e.files)});var s=a.fileupload("send",{files:o});return t.when.apply(null,s).then(function(){i.resolve()},function(){i.reject()}),i},i.prototype.failed=function(t){this.$element.off("fileuploadfailed"),this.$element.on("fileuploadfailed",function(e,a){a&&t(a);
})},i.prototype.completed=function(t,e){var a=this;this.$element.off("fileuploadcompleted"),this.$element.on("fileuploadcompleted",function(i,o){e&&n.close(e);var s=a.getResponse(o);s&&t(s)})},i.prototype.url=function(t){this.options.url=t,this.$element.fileupload("option","url",t)},i.prototype.formData=function(t){this.options.formData=t},i.prototype.destroy=function(){this.$element.removeData("amui.ijfileupload"),this.$element.removeData("blueimp-fileupload")},e.plugin("ijfileupload",i,{dataOptions:"data-ij-fileupload"}),e.ready(function(e){t("[data-ij-fileupload]",e).ijfileupload()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Window,n=t.IJ.Const,i=t.IJ.Dialog,o=t.IJ.Tools,s=function(e,a){this.options=t.extend({},s.DEFAULTS,a),this.$element=t(e),this.$table=[],this.tableApi=void 0,this.winOptions=t.extend({},s.WINDEFAULTS),this.winkey="lookup-win",this.rememberDatakey="lookup_remember_data",this.winOptions.target=this.$element,this.$window={},this.init()};s.prototype.init=function(){this.$element,this.options;this.prepare(),this.render(),this.$window=this.$element.data(this.winkey),this.$window||(this.$window=a.sidebar(this.winOptions),this.$window.css("z-index",1111),this.$element.data(this.winkey,this.$window)),this.bindEvents()},s.prototype.prepare=function(){var t=this.options,e=this.$element,a=t.displayType,n=t.dataKey;this.winOptions.url=t.url,"input"==a&&(t.onSelected||("single"==t.lookType?t.onSelected=function(t){e.val(t[n]),this.close()}:t.onSelected=function(t){e.val(o.tranArray(t,n).join(","))}))},s.prototype.rememberData=function(e){var a=this.$element,n=this.rememberDatakey,i=this.options.dataKey,o=a.data(n)||{};t.each(e,function(t,e){var a=e[i];o[a]=e}),a.data(n,o);var s=[];return t.each(o,function(t,e){s.push(e)}),s},s.prototype.render=function(){var e=this.options.displayType;"input"==e&&(this.$wrapper=t(this.options.tpl.wrapper),this.$element.wrap(this.$wrapper),this.$actions=t(this.options.tpl.actions).insertAfter(this.$element))},s.prototype.bindEvents=function(){var t=(this.options,this);this.$actions&&(this.$actions.on("click",".am-lookup-open",function(){return t.open(),!1}),this.$actions.on("click",".am-lookup-clear",function(){return t.$element.removeData(t.rememberDatakey),t.$element.val(""),!1}))},s.prototype.reset=function(){this.$element.removeData(this.winkey),this.$window.remove(),this.$table=[],this.tableApi=void 0},s.prototype.initTable=function(){if(!this.tableApi){var e=this,a=this.options,o=a.displayType,s=this.$table=t(a.render.current,this.$window),r=t.proxy(a.onSelected,this);this.tableApi=s.ijtable(t.extend({toolBarDisplay:"vertical",actions:["refresh","selected"],toolEvents:{selected:{title:"\u786e\u8ba4\u9009\u62e9",icon:"am-icon-reply",fn:function(t){var l=s.ijtable("findSelectRowData");if(0==l.length)return void i.alert(n.MESSAGE.DATA_NEED_SELECTED);if("single"===a.lookType){if(l.length>1)return void i.alert(n.MESSAGE.DATA_SELECT_ONE);r(l[0])}else"input"==o&&(l=e.rememberData(l)),r(l)}}},tableOptions:{pagingType:"simple"}},this.options.renderOptions))}},s.prototype.open=function(e){var a=this.$window;this.receiveData=e,a.offCanvas("open"),this.$window.hammer().off("swipeleft swipeleft"),a.off("click.offcanvas.amui"),a.on("click.offcanvas.amui",function(e){var n=t(e.target);n.hasClass("am-offcanvas-bar")||n.attr("aria-controls")||n.parents(".am-offcanvas-bar").first().length||(e.stopImmediatePropagation(),a.offCanvas("close"))}),this.initTable()},s.prototype.close=function(){"input"==this.options.displayType&&this.$element.trigger("change"),this.$window&&this.$window.offCanvas("close")},s.WINDEFAULTS={isRemove:!1,loading:!1},s.DEFAULTS={url:"/commom/ui/lookup/lookup.html",lookType:"single",render:{type:"table",current:"table"},renderOptions:{},tpl:{wrapper:'<div class="am-input-group am-input-group-sm"></div>',actions:'<span class="am-input-group-btn"><a class="am-btn am-btn-primary am-lookup-open"> <i class="am-icon-search" /></a><a class="am-btn am-btn-primary am-lookup-clear"> <i class="am-icon-close" /></a></span>'},onOpen:void 0,onSelected:void 0,dataKey:"id",displayType:"input"},e.plugin("ijlookup",s,{dataOptions:"data-ij-lookup"}),e.ready(function(e){t("[data-ij-lookup]",e).ijlookup()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=e.store,n=t.IJ.Const,i=t.IJ.Http,o="am-icon-angle-down",s="am-icon-angle-left",r=n.STORY_KEY.MENU,l=n.STORY_KEY.MENU_ACTIVE,c=function(e,a){this.options=t.extend({},c.DEFAULTS,a),this.$element=t(e),this.$container=t(".ij-menu-container",this.$element),this.initTemplate(n.ROOTPATH),this.init()};c.DEFAULTS={url:""},c.TEMPLATE='{{#smenu menus}}\t\t{{#if hasChilds}}\t\t<a href="{{shref url}}">\t\t\t<i class="am-icon-reorder"></i>\t\t\t<span>{{name}}</span>\t\t\t<i class="am-icon-angle-left am-fr am-margin-right"></i>\t\t</a>\t\t{{else}}\t\t<a href="{{shref url}}">\t\t\t<span>{{name}}</span>\t\t\t<i class="am-icon-angle-left am-fr am-margin-right"></i>\t\t</a>\t\t{{/if}}{{/smenu}}',c.prototype.initTemplate=function(e){this.template=Handlebars.compile(c.TEMPLATE);var n=a.get(l)||[];Handlebars.registerHelper("smenu",function(e,a){var i=function(e,a){for(var o,s="",r=0,l=e.length;r<l;r++)o=e[r],s+="<li>"+a.fn(o),o.childs.length&&(s+='<ul class="am-list am-collapse admin-sidebar-sub',n.length>0&&0==t.inArray("nav-"+o.id,n)&&(s+=" am-in"),s+='"',s+=' id="nav-'+o.id+'">',s+=i(o.childs,a),s+="</ul>"),s+="</li>";return s};return i(e,a)}),Handlebars.registerHelper("shref",function(t){return""==t||"#"==t?"javascript:;":e+t})},c.prototype.initData=function(){var t=this,e=this.options.url;return e?void(a.has(r)?t.render(a.get(r)):i.get(e,{},function(e){a.set(r,e),t.render(e)})):void console.log("not init the url to get menus.")},c.prototype.initEvent=function(){this.options,this.$element;this.$element.on("click","a",function(){var e=t(this),n=e.attr("href");if(n&&"#"!=n&&"javascript:;"!=n){var i=[];e.parentsUntil(".admin-sidebar-list").filter(".admin-sidebar-sub").each(function(){i.push(t(this).attr("id"))}),a.set(l,i)}else{var r=e.next("ul");if(!r.length)return;void 0==r.data("amui.collapse")&&r.on("open.collapse.amui",function(){t("."+s,e).removeClass(s).addClass(o)}).on("close.collapse.amui",function(){t("."+o,e).removeClass(o).addClass(s)}),r.collapse("toggle")}})},c.prototype.init=function(){this.initData(),this.initEvent()},c.prototype.render=function(t){if(t&&!(t.length<=0)){var e=this.template({menus:t});this.$container.replaceWith(e)}},e.plugin("ijmenu",c,{dataOptions:"data-ij-menu"}),e.ready(function(e){t("[data-ij-menu]",e).ijmenu()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=function(e,n){this.options=t.extend({},a.DEFAULTS,n),this.$element=t(e),this.$element.TouchSpin(this.options)};a.DEFAULTS={min:0,max:1e4,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",prefix:"",postfix:"",stepintervaldelay:500,verticalbuttons:!1,booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0},e.plugin("ijnumber",a,{dataOptions:"data-ij-number"}),e.ready(function(e){t("[data-ij-number]",e).ijnumber()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=(t.IJ.Http,function(e,n){this.options=t.extend({},a.DEFAULTS,n),this.$element=t(e),this.init()});a.DEFAULTS={url:[],dataValue:[],amoptions:{}},a.prototype.init=function(){var e=this.options,a=e.amoptions,n=this.$element,i=this.$selects=t("select",n);if(e.url.length){var o=i.length;if(o)return t.each(i,function(n,i){var o=t(i),s={amoptions:a};0==n&&(s.url=e.url[0]),o.ijselect(s)}),this.bindEvent(),this.$element}},a.prototype.bindEvent=function(){var e=this.options,a=this.$element,n=this.$selects,i=n.length;a.on("change","select:lt("+(i-1)+")",function(){var a=t(this),i=a.val(),o=n.index(a),s=o+1;if(!(o<0)){if(null==i||""==i)return void t('option[value!=""]',n.eq(s)).remove();var r=e.url[s].replace("%s",i);r&&n.eq(s).ijselect("reRender",r)}})},a.prototype.destroy=function(){this.$element.removeData("amui.ijrelactionselect"),this.$element.selected("destroy")},e.plugin("ijrelactionselect",a,{dataOptions:"data-ij-relactionselect"}),e.ready(function(e){t("[data-ij-relactionselect]",e).ijrelactionselect()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Http,n=(t.IJ.Const,function(e,a){this.options=t.extend({},n.DEFAULTS,a),this.$element=t(e),this.init()});n.DEFAULTS={url:"",name:"item",value:"value",dataValue:[],amoptions:{btnWidth:"100%"}},n.prototype.render=function(e){var n=this.options,i=n.dataValue,o=this.$element,s=n.name,r=n.value;a.get(e,{},function(e){var a=[];t.each(e,function(e,n){var o='<option value="'+n[r]+'"';i.length>0&&t.inArray(n[r],i)!=-1&&(o+=' selected="selected"'),o+=">"+n[s]+"</option>",a.push(o)}),o.append(a.join("")),o.selected(n.amoptions)})},n.prototype.reRender=function(e){var a=this.$element;t('option[value!=""]',a).remove(),this.render(e)},n.prototype.init=function(){var t=this.options,e=this.$element;return t.url?(this.render(t.url),this.$element):void e.selected(t.amoptions)},n.prototype.destroy=function(){this.$element.removeData("amui.ijselect"),this.$element.selected("destroy")},e.plugin("ijselect",n,{dataOptions:"data-ij-select"}),e.ready(function(e){t("[data-ij-select]",e).ijselect()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=function(e,n){this.options=t.extend({},a.DEFAULTS,n),this.$element=t(e),this.$element.bootstrapSwitch(this.options)};a.DEFAULTS={size:"sm",animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;"},a.prototype.state=function(t,e){return this.$element.bootstrapSwitch("state",t,e)},a.prototype.toggleState=function(t){return this.$element.bootstrapSwitch("toggleState",t)},a.prototype.destroy=function(){return this.$element.bootstrapSwitch("destroy")},e.plugin("ijswitch",a,{dataOptions:"data-ij-switch"}),e.ready(function(e){t("[data-ij-switch]",e).ijswitch()})}(jQuery),!function(t){"use strict";t.IJ||(t.IJ={});var e=t.AMUI||{},a=t.IJ.Const,n=t.IJ.Http,i=t.IJ.Dialog,o=t.IJ.Tools,s=t.IJ.Window,r=e.store,l=(a.ROOTPATH,"ij-table"),c=function(t){return t.parents("."+l)},d=function(e){return t(".am-toolbar",c(e))},u=function(e){return t(".am-searchbar",c(e))},p={findSelectRowData:function(e,a){var n=[],i=a.column(0).nodes().to$();return t(":checkbox:checked",i).each(function(){var e=t(this).parents("tr"),i=a.row(e).index();n.push(a.rows(i).data()[0])}),n},findSelectRowChecked:function(e,a){var n=a.columns(0).dataSrc()[0],i=p.findSelectRowData(e,a);return i.length<=0?[]:t.map(i,function(t){return t[n]})},dataOnlySelected:function(t){return 1==t.length||(0==t.length?i.alert(a.MESSAGE.DATA_NEED_SELECTED):i.alert(a.MESSAGE.DATA_SELECT_ONE),!1)}},m=function(){var e=function(){var e={checkbox:'<input type="checkbox" name="{0}" value="{1}"/>',img:'<img class="am-img-thumbnail ij-img-preview" src="{0}"/>',link:'<a href="{0}">{1}</a>',bool:'<span class="am-badge am-radius am-badge-{color}"><i class="am-icon-{icon}"></i></span>',disbool:'<span class="am-badge am-radius am-badge-{color}"><i class="am-icon-{icon}"></i></span>'},i={grid:{},columns:[],columnDefs:[],defaultOrder:[],columnsRender:{},init:function(t,e){this.grid=t,this.columns=[],this.columnDefs=[],this.defaultOrder=[],this.columnsRender=e.columnsRender},selectColumn:function(t,e,a){this.grid;this.columns.push(e?{data:e}:{}),this.columnDefs.push({targets:t,render:function(t,a,n){return"display"===a?'<input type="checkbox" name="'+e+'" value="'+t+'"/>':t},orderable:!1,searchable:!1})},operationColumn:function(t,e,a){this.columns.push(e?{data:e}:{}),this.columnDefs.push({targets:-1,data:null,render:function(t,e,a){return"display"===e?"":t},orderable:!1,searchable:!1})},displayColumn:function(i,s,l){var c;switch(s){case"checkbox":c=function(t,a,n){return"display"===a?o.formatString(e[s],i,t):t};break;case"link":c=function(t,a,n){if("display"===a){var i=l.attr("type-link-icon");return i=i?'<i class="'+i+'"></i>':t,t?o.formatString(e[s],t,i):""}return t};break;case"img":c=function(t,a,n){return"display"===a?t?o.formatString(e[s],t):"":t};break;case"bool":c=function(t,a,n){return"display"===a?t?o.formatString(e[s],{color:"success",icon:"check"}):o.formatString(e[s],{color:"danger",icon:"remove"}):t};break;case"disbool":c=function(t,a,n){return"display"===a?t?o.formatString(e[s],{color:"danger",icon:"ban"}):o.formatString(e[s],{color:"success",icon:"check"}):t};break;case"dic":var d=l.attr("type-dic");if(d){var u,p="_IJDIC_KEY_"+d;r.has(p)||r.set(p,n.getSyncData(a.URL.DIC.replace("%s",a.dic[d]))),u=r.get(p).sub;var m={},f=",";t.each(u,function(t,e){m[e.value]=e.item}),c=function(e,a,n){var i=[],o=[];return"string"==t.type(e)?o=e.split(f):o.push(e),t.each(o,function(t,e){void 0!=m[e]&&i.push(m[e])}),i.join(f)}}break;case"html":break;default:c=function(t,e,a){if("display"===e){var n=o.format(l.attr("ij-format"),t);return o.htmlencode(n)}return t}}return c},normalColumn:function(e,a,n){var i=void 0==n.attr("ij-no-sort"),o=n.attr("ij-default-sort"),s=n.attr("ij-type")||"text";void 0!=o&&(this.defaultOrder=[e,o||"asc"]);var r=a?{data:a,orderable:i}:{orderable:i};if(this.columnsRender&&this.columnsRender[a]){var l=this.columnsRender[a];l&&"function"==t.type(l)&&(r.render=function(t,e,a){return"display"===e?l(t,e,a):t})}else{var l=this.displayColumn(a,s,n);l&&(r.render=l)}this.columns.push(r)}};return{init:function(e,a){return i.init(e,a),t("thead tr th",e).each(function(e,a){var n=t(this),o=n.attr("ij-cloumn");n.hasClass("ij-check")?i.selectColumn(e,o,n):n.hasClass("ij-operation")?i.operationColumn(e,o,n):i.normalColumn(e,o,n)}),i}}}(),i=function(e,a,n){var i={};if(i["pager.pageSize"]=a.length,i["pager.currentPage"]=a.start/a.length+1,a.order&&a.order[0]){var o=n[a.order[0].column].data;i["order.column"]=o,i["order.sortType"]=a.order[0].dir}var s=":input:not(:button)";return t(s,u(e)).each(function(){var e=t(this),a=t.trim(e.val());a&&(i["query["+e.attr("name")+"]"]=a)}),i};return{init:function(a,o){var s=a.grid,o=t.extend({},o),r=392;a.options.isCompact&&(r=311,!s.hasClass("am-table-compact")&&s.addClass("am-table-compact")),a.options.isScrollX&&(r+=16,o.scrollX=!0);var o=t.extend({scrollY:r+"px",scrollX:!1,oLanguage:{sLengthMenu:'<div class="am-form-group">\u663e\u793a</div> <div class="am-form-group am-form-select">_MENU_</div> <div class="am-form-group">\u6761</div>',sInfo:"<label>- \u5171 _TOTAL_ \u6761 -</label>",sInfoEmpty:"\u5171 0 \u6761",sProcessing:'<div class="ij-loading am-center"></div>',sInfoThousands:","},searching:!1,autoWidth:!1,processing:!0,lengthMenu:[[10,20,50,-1],["10","20","50","ALL"]],order:[[1,"asc"]],columns:[],columnDefs:[]},o);if(0==o.columns.length){var l=e.init(s,a.options);o.columns=l.columns,o.columnDefs=l.columnDefs,l.defaultOrder.length>0&&(o.order=l.defaultOrder)}var c=a.action.query;return"string"==typeof c?(o.serverSide=!0,o.ajax=function(t,e,a){n.post(c,i(s,t,a.aoColumns),function(t){if(t){var a={},n=t.pager;a.recordsTotal=n.totalSize,a.recordsFiltered=n.totalSize,a.data=t.resultList||[],e(a)}})}):o.data=c,s.DataTable(o)}}}(),f=function(){var e=function(){var e='<a title="{title}" href="javascript:;"><span class="{icon}"></span></a>',r={refresh:{title:"\u5237\u65b0",icon:"am-icon-refresh",fn:function(t){t.preventDefault(),t.data.api.draw()}},plus:{title:"\u65b0\u589e",icon:"am-icon-plus",fn:function(e){e.preventDefault();var r=e.data.action,l=e.data.api,c="save",d=e.data.options.onAddOpen,u=e.data.options.prepareData,p=s.open({url:e.data.page[c],onOpen:function(e){var s=t(".ij-edit",e);s.validator({submit:function(){return n.formValidatorSubmit(this,r[c],u?u(s):s.serialize(),function(t){o.clearForm(s),l.draw(),i.confirm({content:a.MESSAGE.DATA_ADD_SUCCESS,onConfirm:function(){i.close(p)}})}),!1}}),d&&d(s)}})}},edit:{title:"\u7f16\u8f91",icon:"am-icon-edit",fn:function(e){e.preventDefault();var r=e.data.grid.ijtable("findOnlyRowChecked");if(r){var l=e.data.action,c=e.data.api,d="edit",u=e.data.options.onEditOpen,p=e.data.options.prepareData,m=n.getSyncData(l.get+"/"+r);if(m)var f=s.open({url:e.data.page[d],onOpen:function(e){var s=t(".ij-edit",e);s.validator({submit:function(){return n.formValidatorSubmit(this,l[d]+"/"+r,p?p(s):s.serialize(),function(t){c.draw(!1),i.confirm({content:a.MESSAGE.DATA_EDIT_SUCCESS,onConfirm:function(){i.close(f)}})}),!1}}),u?u(s,m):o.fillForm(s,m)}})}}},detail:{title:"\u8be6\u60c5",icon:"am-icon-tasks",fn:function(t){t.preventDefault();var e=t.data.grid.ijtable("findOnlyRowChecked");if(e){var a=t.data.action,i="detail",r=t.data.options.onDetailOpen,l=n.getSyncData(a.get+"/"+e);l&&s.open({url:t.data.page[i],onOpen:function(t){r?r(t,l):o.fillObject(t,l)}})}}},del:{title:"\u5220\u9664",icon:"am-icon-trash-o",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(o.length>0){var s=t.data.action;i.confirm({content:a.MESSAGE.DATA_CONFIRM_DELETE,onConfirm:function(){n.post(s.del,{ids:o},function(t){e.draw()},{title:a.MESSAGE.DATA_DELETE_PROCESS})}})}else i.alert(a.MESSAGE.DATA_NEED_SELECTED)}},sort:{title:"\u6392\u5e8f",icon:"am-icon-paixu",fn:function(t){t.preventDefault();var e=t.data.api,i=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(i)){var o=t.data.action,r=i[0],l="sort",c=(t.data.options.onSortOpen,n.getSyncData(o.get+"/"+r));c&&s.sorted({sort:c.sort,onConfirm:function(t){n.post(o[l]+"/"+r,{sort:t.data},function(t){e.draw()},{title:a.MESSAGE.DATA_SUBMIT_PROCESS})}})}}},sortTop:{title:"\u7f6e\u9876",icon:"am-icon-zhiding",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(o)){var s=t.data.action,r=o[0];i.confirm({content:a.MESSAGE.DATA_CONFIRM_SORT_TOP,onConfirm:function(){n.post(s.sortTop+"/"+r,{},function(t){e.draw()},{title:a.MESSAGE.DATA_SUBMIT_PROCESS})}})}}},sortDown:{title:"\u7f6e\u5e95",icon:"am-icon-zhidi",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(o)){var s=t.data.action,r=o[0];i.confirm({content:a.MESSAGE.DATA_CONFIRM_SORT_DOWN,onConfirm:function(){n.post(s.sortDown+"/"+r,{},function(t){e.draw()},{title:a.MESSAGE.DATA_SUBMIT_PROCESS})}})}}}};return{register:function(e){r=t.extend(r,e)},init:function(a,n,i){var s=r[n];s&&t(o.formatString(e,{title:s.title,icon:s.icon})).prependTo(a).on("click",i,s.fn)}}}(),r={cells:function(e){var a=e.tables().header().to$(),n=e.tables().containers().to$();a.on("click",".ij-check :checkbox",function(a){var n=t(this),i=n.parent().attr("ij-cloumn"),o=e.cells().nodes().to$();t(':checkbox[name="'+i+'"]',o).prop("checked",n.prop("checked"))}),n.on("click","td:has(.ij-img-preview)",function(e){var a=t(".ij-img-preview",t(this)).attr("src");i.pureView(a)})},search:function(e){t(".ij-search",u(this)).on("click",function(){e.draw()})},reset:function(e){var a=u(this);t(".ij-reset",a).on("click",function(){o.resetForm(a),e.draw()})}};return{init:function(a,n){a.api=n;var i=a.options,o=a.grid,s=c(o),l=d(o);for(var u in r)r[u].call(o,n);i.toolEvents&&e.register(i.toolEvents);var m=a.options.toolBarDisplay;if(l.hasClass("am-toolbar-"+m)||l.addClass("am-toolbar-"+m),i.actions)for(var f=0;f<i.actions.length;f++)e.init(l,i.actions[f],a);if(i.fn){var h=".ij-fn",v=t(h,s);if(v.length)for(var g in i.fn)t(h+"-"+g,v).on("click",function(){i.fn[g]&&i.fn[g].call(this,p.findSelectRowData(o,n),n)})}}}}(),h=function(e,a,n){var i=function(e,a){var n="string"==typeof e?t("#"+e):e,i=a.root,a=t.extend({isCompact:!1,isRemove:!0,pageSuffix:"html",actions:["del","detail","edit","plus","refresh"],toolBarDisplay:"horizontal"},a),o=t.extend({query:i+"/list",get:i+"/get",save:i+"/save",edit:i+"/edit",del:i+"/remove",sort:i+"/sort",sortTop:i+"/sortTop",sortDown:i+"/sortDown"},a.actionsMap),s=a.pageSuffix,r={save:"/page"+i+"/edit."+s,edit:"/page"+i+"/edit."+s,detail:"/page"+i+"/detail."+s};return 0==a.isRemove&&(o.del=i+"/delete"),a.tableOptions=void 0,{grid:n,page:r,action:o,options:a}};return{init:function(t,n){var o=i(t,n),s=e.init(o,n.tableOptions);return a.init(o,s),s}}}(m,f,p),v=function(e,a){this.options=t.extend({},a),this.$element=t(e),t.fn.DataTable.isDataTable(this.$element)||(this.api=h.init(this.$element,this.options))};v.prototype.findSelectRowData=function(){return p.findSelectRowData(this.$element,this.api)},v.prototype.findOnlyRowData=function(){var t=p.findSelectRowData(this.$element,this.api);return!!p.dataOnlySelected(t)&&t[0]},v.prototype.findOnlyRowChecked=function(){var t=p.findSelectRowChecked(this.$element,this.api);return!!p.dataOnlySelected(t)&&t[0]},e.plugin("ijtable",v,{dataOptions:"data-ij-table"}),e.ready(function(e){t("[data-ij-table]",e).ijtable()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=(t.IJ.Http,t.IJ.Const,function(e,n){this.options=t.extend({},a.DEFAULTS,n),this.$element=t(e),this.init()});a.DEFAULTS={dataValue:void 0,sep:",",confirmKeys:[13,32],trimValue:!1,allowDuplicates:!1},a.prototype.init=function(){return this.$element.tagsinput(this.options),this.options.dataValue&&this.$element.tagsinput("add",this.options.dataValue),this.$element},a.prototype.destroy=function(){this.$element.removeData("amui.ijtags"),this.$element.selected("destroy")},e.plugin("ijtags",a,{dataOptions:"data-ij-tags"}),e.ready(function(e){t("[data-ij-tags]",e).ijtags()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},a=t.IJ.Http,n=t.IJ.Tools,i=function(e,a){this.options=t.extend({},i.DEFAULTS,a),this.$element=t(e),this.init(),this.bindActions()};i.DEFAULTS={root:"",childs:"",itemSelect:!0,multiSelect:!1,cacheItems:!0,folderSelect:!1},i.TPL={PARENT:'<li class="am-tree-branch am-hide"  data-template="treebranch" role="treeitem" aria-expanded="false"><div class="am-tree-branch-header"><button class="am-tree-branch-name"><span class="am-tree-icon am-tree-icon-folder"></span> <span class="am-tree-label"></span></button></div><ul class="am-tree-branch-children" role="group"></ul><div class="am-tree-loader" role="alert">Loading...</div></li>',CHILDREN:'<li class="am-tree-item am-hide" data-template="treeitem" role="treeitem"><button class="am-tree-item-name"><span class="am-tree-icon am-tree-icon-item"></span> <span class="am-tree-label"></span></button></li>'},i.prototype.init=function(){var e=this.$element,o=this.options;if(e.has("[data-template=treebranch]").length||e.append(i.TPL.PARENT),e.has("[data-template=treeitem]").length||e.append(i.TPL.CHILDREN),!o.dataSource){var s=function(e,i,o){var s=t.type(e);if("string"==s){var r=n.formatString(e,o);a.get(r,{},function(e){i("array"==t.type(e)?{data:e}:{data:[e]})})}else"function"==s?e(o,i):i({data:e})};o.dataSource=function(t,e){t.title?s(o.childs,e,t):s(o.root,e,t)}}e.tree(o)},i.prototype.bindActions=function(){if(this.options.actions){var e=this.$element;t.each(this.options.actions,function(a,n){e.on("click",".ij-"+a,function(e){var a=t(this).closest("[role=treeitem]"),i=a.data();return n(i,a),!1})})}},i.prototype.refresh=function(t){if(t.length){var e=t.find("[role=group]").children();e.length&&e.remove(),this.$element.tree("openFolder",t)}else this.$element.tree("refresh")},i.prototype.refreshParent=function(t){this.refresh(t.parents("[role=treeitem]:first"))},e.plugin("ijtree",i,{dataOptions:"data-ij-tree"}),e.ready(function(e){t("[data-ij-tree]",e).ijtree()})}(jQuery);