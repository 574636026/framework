!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Tools,n=t.IJ.Dialog,a=function(e,i){this.options=t.extend({},a.DEFAULTS,i),this.$element=t(e),this.init()};a.DEFAULTS={target:"#page-context"},a.prototype.init=function(){var e=this.options,a=e.url||this.$element.attr("href");a&&this.$element.on("click",function(){var o=n.loading();return t(e.target).load(a+"?t="+(new Date).getTime(),function(){i.refreshUI(t(this)),o.modal("close")}),!1})},e.plugin("ajaxload",a,{dataOptions:"data-ij-ajaxload"}),e.ready(function(e){t("[data-ij-ajaxload]",e).ajaxload()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Const.ROOTPATH;t.fn.extend({autocomplete:function(){var n="ij-autocomplete-value";return this.each(function(){var a=t(this),o=(e.utils.options(a.attr("data-ij-autocomplete"))||{},t.extend({name:"item",value:"value"},o));if(o.url){var r=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(o.name),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:i+o.url,prepare:function(t,e){return e.method="post",e.data={key:t},e},transform:function(t){return t.result}}});a.typeahead({highlight:!0,hint:!1,minLength:1},{source:r,display:o.item}).on("typeahead:select",function(t,e){a.data(n,e),o.target&&a.parent().nextAll('input[name="'+o.target+'"]').val(e[o.value])}).on("typeahead:close",function(t){})}})}}),e.ready(function(e){t("[data-ij-autocomplete]",e).autocomplete()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$element=t(e),this.init()};i.DEFAULTS={format:"YYYY-MM-DD",autoApply:!0,showEasyBtn:"default",singleDatePicker:!0,showDropdowns:!1,alwaysShowCalendars:!1,minuteStep:5,startDate:void 0,endDate:void 0,drops:"down"},i.RANGES={"default":{"\u4eca\u5929":[moment().startOf("day"),moment().endOf("day")],"\u6628\u5929":[moment().startOf("day").subtract(1,"days"),moment().endOf("day").subtract(1,"days")],"7\u5929\u524d":[moment().startOf("day").subtract(6,"days"),moment().endOf("day")],"14\u5929\u524d":[moment().startOf("day").subtract(13,"days"),moment().endOf("day")],"30\u5929\u524d":[moment().startOf("day").subtract(29,"days"),moment().endOf("day")],"\u5f53\u524d\u6708":[moment().startOf("month"),moment().endOf("month")]},after:{"\u4eca\u5929":[moment().startOf("day"),moment().endOf("day")],"\u660e\u5929":[moment().startOf("day").add(1,"days"),moment().endOf("day").add(1,"days")],"7\u5929\u540e":[moment().startOf("day"),moment().endOf("day").add(6,"days")],"14\u5929\u540e":[moment().startOf("day"),moment().endOf("day").add(13,"days")],"\u4e00\u4e2a\u6708":[moment().startOf("day"),moment().endOf("day").add(1,"month")],"\u4e09\u4e2a\u6708":[moment().startOf("day"),moment().endOf("day").add(3,"month")]}},i.SOURCE_DEFAULTS={singleDatePicker:!0,showDropdowns:!1,autoApply:!0,alwaysShowCalendars:!1,timePicker:!1,timePicker24Hour:!1,timePickerSeconds:!1,timePickerIncrement:1,drops:"down",locale:{format:"YYYY-MM-DD HH:mm:ss",separator:" ~ ",applyLabel:"\u786e\u8ba4",cancelLabel:"\u53d6\u6d88",fromLabel:"From",toLabel:"To",customRangeLabel:"\u9009\u62e9",daysOfWeek:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],firstDay:1}},i.prototype.init=function(){var t=this.genConfig();return this.$element.daterangepicker(t),this.$element},i.prototype.genConfig=function(){var e=this.options,n=t.extend({},i.SOURCE_DEFAULTS);return n.singleDatePicker=e.singleDatePicker,n.autoApply=e.autoApply,n.showDropdowns=e.showDropdowns,n.alwaysShowCalendars=e.alwaysShowCalendars,n.timePickerIncrement=e.minuteStep,n.drops=e.drops,n.startDate=e.startDate,n.endDate=e.endDate,e.showEasyBtn&&(n.ranges=i.RANGES[e.showEasyBtn]),n.locale.format=e.format,e.format.indexOf("H")!=-1&&(n.timePicker=!0,n.timePicker24Hour=!0),e.format.indexOf("s")!=-1&&(n.timePickerSeconds=!0),n},i.prototype.destroy=function(){this.$element.removeData("amui.ijdatetimepicker"),this.$element.removeData("datetimepicker")},e.plugin("ijdatetimepicker",i,{dataOptions:"data-ij-datetimepicker"}),e.ready(function(e){t("[data-ij-datetimepicker]",e).ijdatetimepicker()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=e.store,n=t.IJ.Const,a=t.IJ.Http,o=n.STORY_KEY.DIC,r=function(e,i){this.options=t.extend({},r.DEFAULTS,i),this.$element=t(e),"array"!=t.type(i.dataValue)&&(this.options.dataValue=[i.dataValue]),this.init()};r.DEFAULTS={type:"text",url:n.URL.DIC,code:"",name:"item",value:"value",sub:"sub",display:"inline",dataValue:[],labelClass:"am-u-sm-4 am-form-label",wrapper:"true",inputWrapperClass:"am-u-sm-8",amoptions:{btnWidth:"100%",maxHeight:100}},r.prototype.render=function(e){var i=this.options,n=e[i.sub];if(this.$input=this.$element,"text"!=i.type&&i.wrapper&&"false"!=i.wrapper){this.$label=t('<label class="'+i.labelClass+'">'+e[i.name]+"</label>"),this.$input.parent().prepend(this.$label);var a=t('<div class="'+i.inputWrapperClass+'"></div>');this.$input.wrap(a),this.$element=a,this.renderOption(n)}else this.renderOption(n)},r.prototype.renderOption=function(e){if(e&&!(e.length<0)){var i=this.options,n=i.dataValue,a=i.name,o=i.value,r=[];switch(i.type){case"select":t.each(e,function(e,i){var s='<option value="'+i[o]+'"';n.length>0&&t.inArray(i[o],n)!=-1&&(s+=' selected="selected"'),s+=">"+i[a]+"</option>",r.push(s)}),this.$input.append(r.join("")),this.$input.selected(i.amoptions);break;case"radio":var s=this.$input.attr("name"),l="am-radio";"inline"==i.display&&(l="am-radio-inline"),t.each(e,function(e,i){var c='<label class="'+l+'">';c+='<input type="radio" name="'+s+'" value="'+i[o]+'"',n.length>0&&t.inArray(i[o],n)!=-1&&(c+=' checked="checked"'),c+="/> "+i[a]+"</label>",r.push(c)});var c=t(r.join(""));this.$input.replaceWith(c),t(":input",c).uCheck(),this.$input=c;break;case"checkbox":var s=this.$input.attr("name"),l="am-checkbox";"inline"==i.display&&(l="am-checkbox-inline"),t.each(e,function(e,i){var c='<label class="'+l+'">';c+='<input type="checkbox" name="'+s+'" value="'+i[o]+'"',n.length>0&&t.inArray(i[o],n)!=-1&&(c+=' checked="checked"'),c+="/>"+i[a]+"</label>",r.push(c)});var c=t(r.join(""));this.$input.replaceWith(c),t(":input",c).uCheck(),this.$input=c;break;case"text":if(n.length<=0)return;var d=n[0];t.each(e,function(t,e){e[o]==d&&r.push(e[a])}),this.$input.append(r.join(""))}}},r.prototype.renderWrapper=function(){var t=this,e=this.options,n=e.code,r=o+n;i.has(r)?t.render(i.get(r)):a.get(e.url,{},function(e){t.render(e),i.set(r,e)})},r.prototype.select=function(e){var i=this.$input;switch(this.options.type){case"select":i.selected("select",e);break;default:t(":input",i).eq(e).uCheck("check")}},r.prototype.init=function(){var t=this.options,e=this.$element;if(t.code){this.options.url=t.url.replace("%s",n.dic[t.code]);var i=e.is("input")?e.attr("type"):e[0].tagName;switch(i.toLowerCase()){case"select":this.options.type="select";break;case"radio":this.options.type="radio";break;case"checkbox":this.options.type="checkbox"}this.renderWrapper()}},e.plugin("ijdic",r,{dataOptions:"data-ij-dic"}),e.ready(function(e){t("[data-ij-dic]",e).ijdic()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=(t.IJ.Const,t.IJ.Http),n=function(e,i){return echarts?(this.options=t.extend({},n.DEFAULTS,i),this.$element=t(e),this.charts=echarts.init(e,this.options.theme),void this.init()):void console.log("\u8bf7\u8f7d\u5165echarts\u76f8\u5173js...")};n.DEFAULTS={theme:"default",url:"",data:{},options:{}},n.prototype.init=function(){var t=this.options;t.url?this._load():this.charts.setOption(t.options)},n.prototype._load=function(){var e=this.charts,n=this.options,a=n.options;e.showLoading(),i.get(n.url,n.data,function(i){e.hideLoading(),a=t.extend({},i,a),e.setOption(a)})},n.prototype.refresh=function(e){if(e){var i=this.options;this.options=t.extend(i,e),this._load()}},e.plugin("ijecharts",n,{dataOptions:"data-ij-echarts"}),e.ready(function(e){t("[data-ij-echarts]",e).ijecharts()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Const,n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$element=t(e),this.editor=new wangEditor(e),this.init()};n.DEFAULTS={config:{printLog:!1,menus:["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","|","img","video","insertcode","|","undo","redo","fullscreen"],uploadImgUrl:i.ROOTPATH+i.URL.UPLOAD.replace("%s","editor")},simple:!0,mode:"normal"},n.prototype.init=function(){this.options.simple&&(this.options.config.menus=["source","|","bold","forecolor","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","img","|","undo","fullscreen"]),this.editor.config=t.extend(this.editor.config,this.options.config),this.switchMode(this.options.mode)},n.prototype.switchMode=function(e){switch(e){case"html":var i=this;this.$element.addClass("am-hide");var n=this.$element.val();n=n?n:"\u7f16\u8f91";var a=t('<div class="am-padding"></div>').css({width:"100%",height:this.$element.height(),"overflow-y":"auto",cursor:"pointer",border:"1px dotted #eee"});a.html(n).insertAfter(this.$element).one("click",function(){a.remove(),i.$element.removeClass("am-hide"),i.createEditor()});break;default:this.createEditor()}},n.prototype.createEditor=function(){var e=this.editor;this.editor.config.uploadImgFns.onload=function(i,n){var a=t.parseJSON(i);if(a.result&&a.result.uploads){var o=a.result.uploads[0],r='<img src="'+o.url+'" alt="'+o.name+'" style="max-width:100%;"/>';e.command(null,"insertHtml",r)}},e.create();var i=e.$txt.html();if("<p>"!=i.substring(0,3)){var n=i.lastIndexOf("<br>");n!=-1&&(i=i.substring(0,n)),e.$txt.html("<p>"+i+"</p>")}},n.prototype.html=function(t){this.editor.$txt.html(t)},e.plugin("ijeditor",n,{dataOptions:"data-ij-editor"}),e.ready(function(e){t("[data-ij-editor]",e).ijeditor()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Const,n=t.IJ.Dialog,a=function(e,i){this.options=t.extend({},a.DEFAULTS,i),this.$element=t(e),this.init()};a.DEFAULTS={url:i.ROOTPATH+i.URL.UPLOAD,dir:"upload.dir.test",type:"post",dataType:"json",autoUpload:!1,singleFileUploads:!0,maxNumberOfFiles:void 0,filesContainer:void 0,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,previewMaxWidth:80,getFilesFromResponse:function(e){var e=e.result;return e.result&&e.result.uploads&&t.isArray(e.result.uploads)?e.result.uploads:[]}},a.prototype.init=function(){var e=this.$element,a=this.options;return this.options.url=a.url.replace("%s",a.dir),a.filesContainer||(a.filesContainer=t('[data-trigger="fileupload"]',e)),"number"==t.type(a.maxNumberOfFiles)&&1==a.maxNumberOfFiles&&(a.previewMaxWidth=120),a.getFilesFromResponse||(a.getFilesFromResponse=function(e){var i=this.getResponse(e);return i&&i.uploads&&t.isArray(i.uploads)?i.uploads:[]}),e.fileupload(a),e.on("fileuploadfailed",function(t,e){void 0!=e.resultCode&&e.resultCode!=i.STATUS.SUCCESS&&n.toast(e.resultMessage||i.STATUSMESSAGE[e.resultCode]||i.MESSAGE.UNKONW_STATUS)}),this},a.prototype.getResponse=function(t){var e=t.result;return e.result?e.result:e},a.prototype.hasFile=function(){var e=t(".template-upload",this.options.filesContainer);return e.length>0},a.prototype.fileupload=function(){var e=this.options,i=this.$element,n=t(".template-upload",e.filesContainer),a=new t.Deferred;if(!this.hasFile())return a.resolve(),a;var o=[];n.each(function(){var e=t(this).data("data");t.merge(o,e.files)});var r=i.fileupload("send",{files:o});return t.when.apply(null,r).then(function(){a.resolve()},function(){a.reject()}),a},a.prototype.failed=function(t){this.$element.off("fileuploadfailed"),this.$element.on("fileuploadfailed",function(e,i){i&&t(i)})},a.prototype.completed=function(t,e){var i=this;this.$element.off("fileuploadcompleted"),this.$element.on("fileuploadcompleted",function(a,o){e&&n.close(e);var r=i.getResponse(o);r&&t(r)})},a.prototype.url=function(t){this.options.url=t,this.$element.fileupload("option","url",t)},a.prototype.formData=function(t){this.options.formData=t},a.prototype.destroy=function(){this.$element.removeData("amui.ijfileupload"),this.$element.removeData("blueimp-fileupload")},e.plugin("ijfileupload",a,{dataOptions:"data-ij-fileupload"}),e.ready(function(e){t("[data-ij-fileupload]",e).ijfileupload()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Window,n=t.IJ.Const,a=t.IJ.Dialog,o=t.IJ.Tools,r=function(e,i){this.options=t.extend({},r.DEFAULTS,i),this.$element=t(e),this.$table=[],this.tableApi=void 0,this.winOptions=t.extend({},r.WINDEFAULTS),this.winkey="lookup-win",this.rememberDatakey="lookup_remember_data",this.winOptions.target=this.$element,this.$window={},this.init()};r.prototype.init=function(){this.$element,this.options;this.prepare(),this.render(),this.$window=this.$element.data(this.winkey),this.$window||(this.$window=i.sidebar(this.winOptions),this.$window.css("z-index",1111),this.$element.data(this.winkey,this.$window)),this.bindEvents()},r.prototype.prepare=function(){var t=this.options,e=this.$element,i=t.displayType,n=t.dataKey;this.winOptions.url=t.url,"input"==i&&(t.onSelected||("single"==t.lookType?t.onSelected=function(t){e.val(t[n]),this.close()}:t.onSelected=function(t){e.val(o.tranArray(t,n).join(","))}))},r.prototype.rememberData=function(e){var i=this.$element,n=this.rememberDatakey,a=this.options.dataKey,o=i.data(n)||{};t.each(e,function(t,e){var i=e[a];o[i]=e}),i.data(n,o);var r=[];return t.each(o,function(t,e){r.push(e)}),r},r.prototype.render=function(){var e=this.options.displayType;"input"==e&&(this.$wrapper=t(this.options.tpl.wrapper),this.$element.wrap(this.$wrapper),this.$actions=t(this.options.tpl.actions).insertAfter(this.$element))},r.prototype.bindEvents=function(){var t=(this.options,this);this.$actions&&(this.$actions.on("click",".am-lookup-open",function(){return t.open(),!1}),this.$actions.on("click",".am-lookup-clear",function(){return t.$element.removeData(t.rememberDatakey),t.$element.val(""),!1}))},r.prototype.reset=function(){this.$element.removeData(this.winkey),this.$window.remove(),this.$table=[],this.tableApi=void 0},r.prototype.initTable=function(){if(!this.tableApi){var e=this,i=this.options,o=i.displayType,r=this.$table=t(i.render.current,this.$window),s=t.proxy(i.onSelected,this);this.tableApi=r.ijtable(t.extend({toolBarDisplay:"vertical",actions:["refresh","selected"],toolEvents:{selected:{title:"\u786e\u8ba4\u9009\u62e9",icon:"am-icon-reply",fn:function(t){var l=r.ijtable("findSelectRowData");if(0==l.length)return void a.alert(n.MESSAGE.DATA_NEED_SELECTED);if("single"===i.lookType){if(l.length>1)return void a.alert(n.MESSAGE.DATA_SELECT_ONE);s(l[0])}else"input"==o&&(l=e.rememberData(l)),s(l)}}},tableOptions:{pagingType:"simple"}},this.options.renderOptions))}},r.prototype.open=function(e){var i=this.$window;this.receiveData=e,i.offCanvas("open"),this.$window.hammer().off("swipeleft swipeleft"),i.off("click.offcanvas.amui"),i.on("click.offcanvas.amui",function(e){var n=t(e.target);n.hasClass("am-offcanvas-bar")||n.attr("aria-controls")||n.parents(".am-offcanvas-bar").first().length||(e.stopImmediatePropagation(),i.offCanvas("close"))}),this.initTable()},r.prototype.close=function(){"input"==this.options.displayType&&this.$element.trigger("change"),this.$window&&this.$window.offCanvas("close")},r.WINDEFAULTS={isRemove:!1,loading:!1},r.DEFAULTS={url:"/commom/ui/lookup/lookup.html",lookType:"single",render:{type:"table",current:"table"},renderOptions:{},tpl:{wrapper:'<div class="am-input-group am-input-group-sm"></div>',actions:'<span class="am-input-group-btn"><a class="am-btn am-btn-primary am-lookup-open"> <i class="am-icon-search" /></a><a class="am-btn am-btn-primary am-lookup-clear"> <i class="am-icon-close" /></a></span>'},onOpen:void 0,onSelected:void 0,dataKey:"id",displayType:"input"},e.plugin("ijlookup",r,{dataOptions:"data-ij-lookup"}),e.ready(function(e){t("[data-ij-lookup]",e).ijlookup()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=e.store,n=t.IJ.Const,a=t.IJ.Http,o="am-icon-angle-down",r="am-icon-angle-left",s=n.STORY_KEY.MENU,l=n.STORY_KEY.MENU_ACTIVE,c=function(e,i){this.options=t.extend({},c.DEFAULTS,i),this.$element=t(e),this.$container=t(".ij-menu-container",this.$element),this.initTemplate(n.ROOTPATH),this.init()};c.DEFAULTS={url:""},c.TEMPLATE='{{#smenu menus}}\t\t{{#if hasChilds}}\t\t<a href="{{shref url}}">\t\t\t<i class="am-icon-reorder"></i>\t\t\t<span>{{name}}</span>\t\t\t<i class="am-icon-angle-left am-fr am-margin-right"></i>\t\t</a>\t\t{{else}}\t\t<a href="{{shref url}}">\t\t\t<span>{{name}}</span>\t\t\t<i class="am-icon-angle-left am-fr am-margin-right"></i>\t\t</a>\t\t{{/if}}{{/smenu}}',c.prototype.initTemplate=function(e){this.template=Handlebars.compile(c.TEMPLATE);var n=i.get(l)||[];Handlebars.registerHelper("smenu",function(e,i){var a=function(e,i){for(var o,r="",s=0,l=e.length;s<l;s++)o=e[s],r+="<li>"+i.fn(o),o.childs.length&&(r+='<ul class="am-list am-collapse admin-sidebar-sub',n.length>0&&0==t.inArray("nav-"+o.id,n)&&(r+=" am-in"),r+='"',r+=' id="nav-'+o.id+'">',r+=a(o.childs,i),r+="</ul>"),r+="</li>";return r};return a(e,i)}),Handlebars.registerHelper("shref",function(t){return""==t||"#"==t?"javascript:;":e+t})},c.prototype.initData=function(){var t=this,e=this.options.url;return e?void(i.has(s)?t.render(i.get(s)):a.get(e,{},function(e){i.set(s,e),t.render(e)})):void console.log("not init the url to get menus.")},c.prototype.initEvent=function(){this.options,this.$element;this.$element.on("click","a",function(){var e=t(this),n=e.attr("href");if(n&&"#"!=n&&"javascript:;"!=n){var a=[];e.parentsUntil(".admin-sidebar-list").filter(".admin-sidebar-sub").each(function(){a.push(t(this).attr("id"))}),i.set(l,a)}else{var s=e.next("ul");if(!s.length)return;void 0==s.data("amui.collapse")&&s.on("open.collapse.amui",function(){t("."+r,e).removeClass(r).addClass(o)}).on("close.collapse.amui",function(){t("."+o,e).removeClass(o).addClass(r)}),s.collapse("toggle")}})},c.prototype.init=function(){this.initData(),this.initEvent()},c.prototype.render=function(t){if(t&&!(t.length<=0)){var e=this.template({menus:t});this.$container.replaceWith(e)}},e.plugin("ijmenu",c,{dataOptions:"data-ij-menu"}),e.ready(function(e){t("[data-ij-menu]",e).ijmenu()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$element=t(e),this.$element.TouchSpin(this.options)};i.DEFAULTS={min:0,max:1e4,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",prefix:"",postfix:"",stepintervaldelay:500,verticalbuttons:!1,booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0},e.plugin("ijnumber",i,{dataOptions:"data-ij-number"}),e.ready(function(e){t("[data-ij-number]",e).ijnumber()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=(t.IJ.Http,function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$element=t(e),this.init()});i.DEFAULTS={url:[],dataValue:[],amoptions:{}},i.prototype.init=function(){var e=this.options,i=e.amoptions,n=this.$element,a=this.$selects=t("select",n);if(e.url.length){var o=a.length;if(o)return t.each(a,function(n,a){var o=t(a),r={amoptions:i};0==n&&(r.url=e.url[0]),o.ijselect(r)}),this.bindEvent(),this.$element}},i.prototype.bindEvent=function(){var e=this.options,i=this.$element,n=this.$selects,a=n.length;i.on("change","select:lt("+(a-1)+")",function(){var i=t(this),a=i.val(),o=n.index(i),r=o+1;if(!(o<0)){if(null==a||""==a)return void t('option[value!=""]',n.eq(r)).remove();var s=e.url[r].replace("%s",a);s&&n.eq(r).ijselect("reRender",s)}})},i.prototype.destroy=function(){this.$element.removeData("amui.ijrelactionselect"),this.$element.selected("destroy")},e.plugin("ijrelactionselect",i,{dataOptions:"data-ij-relactionselect"}),e.ready(function(e){t("[data-ij-relactionselect]",e).ijrelactionselect()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Http,n=(t.IJ.Const,function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$element=t(e),this.init()});n.DEFAULTS={url:"",name:"item",value:"value",dataValue:[],amoptions:{btnWidth:"100%"}},n.prototype.render=function(e){var n=this.options,a=n.dataValue,o=this.$element,r=n.name,s=n.value;i.get(e,{},function(e){var i=[];t.each(e,function(e,n){var o='<option value="'+n[s]+'"';a.length>0&&t.inArray(n[s],a)!=-1&&(o+=' selected="selected"'),o+=">"+n[r]+"</option>",i.push(o)}),o.append(i.join("")),o.selected(n.amoptions)})},n.prototype.reRender=function(e){var i=this.$element;t('option[value!=""]',i).remove(),this.render(e)},n.prototype.init=function(){var t=this.options,e=this.$element;return t.url?(this.render(t.url),this.$element):void e.selected(t.amoptions)},n.prototype.destroy=function(){this.$element.removeData("amui.ijselect"),this.$element.selected("destroy")},e.plugin("ijselect",n,{dataOptions:"data-ij-select"}),e.ready(function(e){t("[data-ij-select]",e).ijselect()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$element=t(e),this.$element.bootstrapSwitch(this.options)};i.DEFAULTS={size:"sm",animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;"},i.prototype.state=function(t,e){return this.$element.bootstrapSwitch("state",t,e)},i.prototype.toggleState=function(t){return this.$element.bootstrapSwitch("toggleState",t)},i.prototype.destroy=function(){return this.$element.bootstrapSwitch("destroy")},e.plugin("ijswitch",i,{dataOptions:"data-ij-switch"}),e.ready(function(e){t("[data-ij-switch]",e).ijswitch()})}(jQuery),!function(t){"use strict";t.IJ||(t.IJ={});var e=t.AMUI||{},i=t.IJ.Const,n=t.IJ.Http,a=t.IJ.Dialog,o=t.IJ.Tools,r=t.IJ.Window,s=e.store,l=(i.ROOTPATH,"ij-table"),c=function(t){return t.parents("."+l)},d=function(e){return t(".am-toolbar",c(e))},u=function(e){return t(".am-searchbar",c(e))},p={findSelectRowData:function(e,i){var n=[],a=i.column(0).nodes().to$();return t(":checkbox:checked",a).each(function(){var e=t(this).parents("tr"),a=i.row(e).index();n.push(i.rows(a).data()[0])}),n},findSelectRowChecked:function(e,i){var n=i.columns(0).dataSrc()[0],a=p.findSelectRowData(e,i);return a.length<=0?[]:t.map(a,function(t){return t[n]})},dataOnlySelected:function(t){return 1==t.length||(0==t.length?a.alert(i.MESSAGE.DATA_NEED_SELECTED):a.alert(i.MESSAGE.DATA_SELECT_ONE),!1)}},h=function(){var e=function(){var e={checkbox:'<input type="checkbox" name="{0}" value="{1}"/>',img:'<img class="am-img-thumbnail ij-img-preview" src="{0}"/>',link:'<a href="{0}">{1}</a>',bool:'<span class="am-badge am-radius am-badge-{color}"><i class="am-icon-{icon}"></i></span>',disbool:'<span class="am-badge am-radius am-badge-{color}"><i class="am-icon-{icon}"></i></span>'},a={grid:{},columns:[],columnDefs:[],defaultOrder:[],columnsRender:{},init:function(t,e){this.grid=t,this.columns=[],this.columnDefs=[],this.defaultOrder=[],this.columnsRender=e.columnsRender},selectColumn:function(t,e,i){this.grid;this.columns.push(e?{data:e}:{}),this.columnDefs.push({targets:t,render:function(t,i,n){return"display"===i?'<input type="checkbox" name="'+e+'" value="'+t+'"/>':t},orderable:!1,searchable:!1})},operationColumn:function(t,e,i){this.columns.push(e?{data:e}:{}),this.columnDefs.push({targets:-1,data:null,render:function(t,e,i){return"display"===e?"":t},orderable:!1,searchable:!1})},displayColumn:function(a,r,l){var c;switch(r){case"checkbox":c=function(t,i,n){return"display"===i?o.formatString(e[r],a,t):t};break;case"link":c=function(t,i,n){if("display"===i){var a=l.attr("type-link-icon");return a=a?'<i class="'+a+'"></i>':t,t?o.formatString(e[r],t,a):""}return t};break;case"img":c=function(t,i,n){return"display"===i?t?o.formatString(e[r],t):"":t};break;case"bool":c=function(t,i,n){return"display"===i?t?o.formatString(e[r],{color:"success",icon:"check"}):o.formatString(e[r],{color:"danger",icon:"remove"}):t};break;case"disbool":c=function(t,i,n){return"display"===i?t?o.formatString(e[r],{color:"danger",icon:"ban"}):o.formatString(e[r],{color:"success",icon:"check"}):t};break;case"dic":var d=l.attr("type-dic");if(d){var u,p="_IJDIC_KEY_"+d;s.has(p)||s.set(p,n.getSyncData(i.URL.DIC.replace("%s",i.dic[d]))),u=s.get(p).sub;var h={},m=",";t.each(u,function(t,e){h[e.value]=e.item}),c=function(e,i,n){var a=[],o=[];return"string"==t.type(e)?o=e.split(m):o.push(e),t.each(o,function(t,e){void 0!=h[e]&&a.push(h[e])}),a.join(m)}}break;case"html":break;default:c=function(t,e,i){if("display"===e){var n=o.format(l.attr("ij-format"),t);return o.htmlencode(n)}return t}}return c},normalColumn:function(e,i,n){var a=void 0==n.attr("ij-no-sort"),o=n.attr("ij-default-sort"),r=n.attr("ij-type")||"text";void 0!=o&&(this.defaultOrder=[e,o||"asc"]);var s=i?{data:i,orderable:a}:{orderable:a};if(this.columnsRender&&this.columnsRender[i]){var l=this.columnsRender[i];l&&"function"==t.type(l)&&(s.render=function(t,e,i){return"display"===e?l(t,e,i):t})}else{var l=this.displayColumn(i,r,n);l&&(s.render=l)}this.columns.push(s)}};return{init:function(e,i){return a.init(e,i),t("thead tr th",e).each(function(e,i){var n=t(this),o=n.attr("ij-cloumn");n.hasClass("ij-check")?a.selectColumn(e,o,n):n.hasClass("ij-operation")?a.operationColumn(e,o,n):a.normalColumn(e,o,n)}),a}}}(),a=function(e,i,n){var a={};if(a["pager.pageSize"]=i.length,a["pager.currentPage"]=i.start/i.length+1,i.order&&i.order[0]){var o=n[i.order[0].column].data;a["order.column"]=o,a["order.sortType"]=i.order[0].dir}var r=":input:not(:button)";return t(r,u(e)).each(function(){var e=t(this),i=t.trim(e.val());i&&(a["query["+e.attr("name")+"]"]=i)}),a};return{init:function(i,o){var r=i.grid,o=t.extend({},o),s=392;i.options.isCompact&&(s=311,!r.hasClass("am-table-compact")&&r.addClass("am-table-compact")),i.options.isScrollX&&(s+=16,o.scrollX=!0);var o=t.extend({scrollY:s+"px",scrollX:!1,oLanguage:{sLengthMenu:'<div class="am-form-group">\u663e\u793a</div> <div class="am-form-group am-form-select">_MENU_</div> <div class="am-form-group">\u6761</div>',sInfo:"<label>- \u5171 _TOTAL_ \u6761 -</label>",sInfoEmpty:"\u5171 0 \u6761",sProcessing:'<div class="ij-loading am-center"></div>',sInfoThousands:","},searching:!1,autoWidth:!1,processing:!0,lengthMenu:[[10,20,50,-1],["10","20","50","ALL"]],order:[[1,"asc"]],columns:[],columnDefs:[]},o);if(0==o.columns.length){var l=e.init(r,i.options);o.columns=l.columns,o.columnDefs=l.columnDefs,l.defaultOrder.length>0&&(o.order=l.defaultOrder)}var c=i.action.query;return"string"==typeof c?(o.serverSide=!0,o.ajax=function(t,e,i){n.post(c,a(r,t,i.aoColumns),function(t){if(t){var i={},n=t.pager;i.recordsTotal=n.totalSize,i.recordsFiltered=n.totalSize,i.data=t.resultList||[],e(i)}})}):o.data=c,r.DataTable(o)}}}(),m=function(){var e=function(){var e='<a title="{title}" href="javascript:;"><span class="{icon}"></span></a>',s={refresh:{title:"\u5237\u65b0",icon:"am-icon-refresh",fn:function(t){t.preventDefault(),t.data.api.draw()}},plus:{title:"\u65b0\u589e",icon:"am-icon-plus",fn:function(e){e.preventDefault();var s=e.data.action,l=e.data.api,c="save",d=e.data.options.onAddOpen,u=e.data.options.prepareData,p=r.open({url:e.data.page[c],onOpen:function(e){var r=t(".ij-edit",e);r.validator({submit:function(){return n.formValidatorSubmit(this,s[c],u?u(r):r.serialize(),function(t){o.clearForm(r),l.draw(),a.confirm({content:i.MESSAGE.DATA_ADD_SUCCESS,onConfirm:function(){a.close(p)}})}),!1}}),d&&d(r)}})}},edit:{title:"\u7f16\u8f91",icon:"am-icon-edit",fn:function(e){e.preventDefault();var s=e.data.grid.ijtable("findOnlyRowChecked");if(s){var l=e.data.action,c=e.data.api,d="edit",u=e.data.options.onEditOpen,p=e.data.options.prepareData,h=n.getSyncData(l.get+"/"+s);if(h)var m=r.open({url:e.data.page[d],onOpen:function(e){var r=t(".ij-edit",e);r.validator({submit:function(){return n.formValidatorSubmit(this,l[d]+"/"+s,p?p(r):r.serialize(),function(t){c.draw(!1),a.confirm({content:i.MESSAGE.DATA_EDIT_SUCCESS,onConfirm:function(){a.close(m)}})}),!1}}),u?u(r,h):o.fillForm(r,h)}})}}},detail:{title:"\u8be6\u60c5",icon:"am-icon-tasks",fn:function(t){t.preventDefault();var e=t.data.grid.ijtable("findOnlyRowChecked");if(e){var i=t.data.action,a="detail",s=t.data.options.onDetailOpen,l=n.getSyncData(i.get+"/"+e);l&&r.open({url:t.data.page[a],onOpen:function(t){s?s(t,l):o.fillObject(t,l)}})}}},del:{title:"\u5220\u9664",icon:"am-icon-trash-o",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(o.length>0){var r=t.data.action;a.confirm({content:i.MESSAGE.DATA_CONFIRM_DELETE,onConfirm:function(){n.post(r.del,{ids:o},function(t){e.draw()},{title:i.MESSAGE.DATA_DELETE_PROCESS})}})}else a.alert(i.MESSAGE.DATA_NEED_SELECTED)}},sort:{title:"\u6392\u5e8f",icon:"am-icon-paixu",fn:function(t){t.preventDefault();var e=t.data.api,a=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(a)){var o=t.data.action,s=a[0],l="sort",c=(t.data.options.onSortOpen,n.getSyncData(o.get+"/"+s));c&&r.sorted({sort:c.sort,onConfirm:function(t){n.post(o[l]+"/"+s,{sort:t.data},function(t){e.draw()},{title:i.MESSAGE.DATA_SUBMIT_PROCESS})}})}}},sortTop:{title:"\u7f6e\u9876",icon:"am-icon-zhiding",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(o)){var r=t.data.action,s=o[0];a.confirm({content:i.MESSAGE.DATA_CONFIRM_SORT_TOP,onConfirm:function(){n.post(r.sortTop+"/"+s,{},function(t){e.draw()},{title:i.MESSAGE.DATA_SUBMIT_PROCESS})}})}}},sortDown:{title:"\u7f6e\u5e95",icon:"am-icon-zhidi",fn:function(t){t.preventDefault();var e=t.data.api,o=p.findSelectRowChecked(t.data.grid,t.data.api);if(p.dataOnlySelected(o)){var r=t.data.action,s=o[0];a.confirm({content:i.MESSAGE.DATA_CONFIRM_SORT_DOWN,onConfirm:function(){n.post(r.sortDown+"/"+s,{},function(t){e.draw()},{title:i.MESSAGE.DATA_SUBMIT_PROCESS})}})}}}};return{register:function(e){s=t.extend(s,e)},init:function(i,n,a){var r=s[n];r&&t(o.formatString(e,{title:r.title,icon:r.icon})).prependTo(i).on("click",a,r.fn)}}}(),s={cells:function(e){var i=e.tables().header().to$(),n=e.tables().containers().to$();i.on("click",".ij-check :checkbox",function(i){var n=t(this),a=n.parent().attr("ij-cloumn"),o=e.cells().nodes().to$();t(':checkbox[name="'+a+'"]',o).prop("checked",n.prop("checked"))}),n.on("click","td:has(.ij-img-preview)",function(e){var i=t(".ij-img-preview",t(this)).attr("src");a.pureView(i)})},search:function(e){t(".ij-search",u(this)).on("click",function(){e.draw()})},reset:function(e){var i=u(this);t(".ij-reset",i).on("click",function(){o.resetForm(i),e.draw()})}};return{init:function(i,n){i.api=n;var a=i.options,o=i.grid,r=c(o),l=d(o);for(var u in s)s[u].call(o,n);a.toolEvents&&e.register(a.toolEvents);var h=i.options.toolBarDisplay;if(l.hasClass("am-toolbar-"+h)||l.addClass("am-toolbar-"+h),a.actions)for(var m=0;m<a.actions.length;m++)e.init(l,a.actions[m],i);if(a.fn){var f=".ij-fn",v=t(f,r);if(v.length)for(var y in a.fn)t(f+"-"+y,v).on("click",function(){a.fn[y]&&a.fn[y].call(this,p.findSelectRowData(o,n),n)})}}}}(),f=function(e,i,n){var a=function(e,i){var n="string"==typeof e?t("#"+e):e,a=i.root,i=t.extend({isCompact:!1,isRemove:!0,pageSuffix:"html",actions:["del","detail","edit","plus","refresh"],toolBarDisplay:"horizontal"},i),o=t.extend({query:a+"/list",get:a+"/get",save:a+"/save",edit:a+"/edit",del:a+"/remove",sort:a+"/sort",sortTop:a+"/sortTop",sortDown:a+"/sortDown"},i.actionsMap),r=i.pageSuffix,s={save:"/page"+a+"/edit."+r,edit:"/page"+a+"/edit."+r,detail:"/page"+a+"/detail."+r};return 0==i.isRemove&&(o.del=a+"/delete"),i.tableOptions=void 0,{grid:n,page:s,action:o,options:i}};return{init:function(t,n){var o=a(t,n),r=e.init(o,n.tableOptions);return i.init(o,r),r}}}(h,m,p),v=function(e,i){
this.options=t.extend({},i),this.$element=t(e),t.fn.DataTable.isDataTable(this.$element)||(this.api=f.init(this.$element,this.options))};v.prototype.findSelectRowData=function(){return p.findSelectRowData(this.$element,this.api)},v.prototype.findOnlyRowData=function(){var t=p.findSelectRowData(this.$element,this.api);return!!p.dataOnlySelected(t)&&t[0]},v.prototype.findOnlyRowChecked=function(){var t=p.findSelectRowChecked(this.$element,this.api);return!!p.dataOnlySelected(t)&&t[0]},e.plugin("ijtable",v,{dataOptions:"data-ij-table"}),e.ready(function(e){t("[data-ij-table]",e).ijtable()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=(t.IJ.Http,t.IJ.Const,function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$element=t(e),this.init()});i.DEFAULTS={dataValue:void 0,sep:",",confirmKeys:[13,32],trimValue:!1,allowDuplicates:!1},i.prototype.init=function(){return this.$element.tagsinput(this.options),this.options.dataValue&&this.$element.tagsinput("add",this.options.dataValue),this.$element},i.prototype.destroy=function(){this.$element.removeData("amui.ijtags"),this.$element.selected("destroy")},e.plugin("ijtags",i,{dataOptions:"data-ij-tags"}),e.ready(function(e){t("[data-ij-tags]",e).ijtags()})}(jQuery),!function(t){"use strict";var e=t.AMUI||{},i=t.IJ.Http,n=t.IJ.Tools,a=function(e,i){this.options=t.extend({},a.DEFAULTS,i),this.$element=t(e),this.init(),this.bindActions()};a.DEFAULTS={root:"",childs:"",itemSelect:!0,multiSelect:!1,cacheItems:!0,folderSelect:!1},a.TPL={PARENT:'<li class="am-tree-branch am-hide"  data-template="treebranch" role="treeitem" aria-expanded="false"><div class="am-tree-branch-header"><button class="am-tree-branch-name"><span class="am-tree-icon am-tree-icon-folder"></span> <span class="am-tree-label"></span></button></div><ul class="am-tree-branch-children" role="group"></ul><div class="am-tree-loader" role="alert">Loading...</div></li>',CHILDREN:'<li class="am-tree-item am-hide" data-template="treeitem" role="treeitem"><button class="am-tree-item-name"><span class="am-tree-icon am-tree-icon-item"></span> <span class="am-tree-label"></span></button></li>'},a.prototype.init=function(){var e=this.$element,o=this.options;if(e.has("[data-template=treebranch]").length||e.append(a.TPL.PARENT),e.has("[data-template=treeitem]").length||e.append(a.TPL.CHILDREN),!o.dataSource){var r=function(e,a,o){var r=t.type(e);if("string"==r){var s=n.formatString(e,o);i.get(s,{},function(e){a("array"==t.type(e)?{data:e}:{data:[e]})})}else"function"==r?e(o,a):a({data:e})};o.dataSource=function(t,e){t.title?r(o.childs,e,t):r(o.root,e,t)}}e.tree(o)},a.prototype.bindActions=function(){if(this.options.actions){var e=this.$element;t.each(this.options.actions,function(i,n){e.on("click",".ij-"+i,function(e){var i=t(this).closest("[role=treeitem]"),a=i.data();return n(a,i),!1})})}},a.prototype.refresh=function(t){if(t.length){var e=t.find("[role=group]").children();e.length&&e.remove(),this.$element.tree("openFolder",t)}else this.$element.tree("refresh")},a.prototype.refreshParent=function(t){this.refresh(t.parents("[role=treeitem]:first"))},e.plugin("ijtree",a,{dataOptions:"data-ij-tree"}),e.ready(function(e){t("[data-ij-tree]",e).ijtree()})}(jQuery);